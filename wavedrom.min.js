/*! wavedrom 2018-08-15 */

!function o(s,i,l){function c(e,t){if(!i[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(p)return p(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var a=i[e]={exports:{}};s[e][0].call(a.exports,function(t){return c(s[e][1][t]||t)},a,a.exports,o,s,i,l)}return i[e].exports}for(var p="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,n){"use strict";e.exports=function(i,l){var c,p;function u(t){var e=parseInt(p.style.left,10),n=parseInt(p.style.top,10);(t.x<e||t.x>e+p.offsetWidth||t.y<n||t.y>n+p.offsetHeight)&&(p.parentNode.removeChild(p),document.body.removeEventListener("mousedown",u,!1))}(c=document.getElementById(l+i)).childNodes[0].addEventListener("contextmenu",function(t){var e,n,r;(p=document.createElement("div")).className="wavedromMenu",p.style.top=t.y+"px",p.style.left=t.x+"px",e=document.createElement("ul"),(n=document.createElement("li")).innerHTML="Save as PNG",e.appendChild(n),(r=document.createElement("li")).innerHTML="Save as SVG",e.appendChild(r),p.appendChild(e),document.body.appendChild(p),n.addEventListener("click",function(){var t,e,n,r,a,o,s;t="",0!==i&&(t+=(e=document.getElementById(l+0)).innerHTML.substring(166,e.innerHTML.indexOf('<g id="waves_0">'))),t=[c.innerHTML.slice(0,166),t,c.innerHTML.slice(166)].join(""),n="data:image/svg+xml;base64,"+btoa(t),(r=new Image).src=n,(a=document.createElement("canvas")).width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0),o=a.toDataURL("image/png"),(s=document.createElement("a")).href=o,s.download="wavedrom.png",s.click(),p.parentNode.removeChild(p),document.body.removeEventListener("mousedown",u,!1)},!1),r.addEventListener("click",function(){var t,e,n,r;t="",0!==i&&(t+=(e=document.getElementById(l+0)).innerHTML.substring(166,e.innerHTML.indexOf('<g id="waves_0">'))),t=[c.innerHTML.slice(0,166),t,c.innerHTML.slice(166)].join(""),n="data:image/svg+xml;base64,"+btoa(t),(r=document.createElement("a")).href=n,r.download="wavedrom.svg",r.click(),p.parentNode.removeChild(p),document.body.removeEventListener("mousedown",u,!1)},!1),p.addEventListener("contextmenu",function(t){t.preventDefault()},!1),document.body.addEventListener("mousedown",u,!1),t.preventDefault()},!1)}},{}],2:[function(t,e,n){"use strict";var r=t("./jsonml-parse");e.exports=r},{"./jsonml-parse":22}],3:[function(t,e,n){"use strict";var r=t("./eva"),a=t("./render-wave-form");e.exports=function(){a(0,r("InputJSON_0"),"WaveDrom_Display_")}},{"./eva":4,"./render-wave-form":36}],4:[function(require,module,exports){"use strict";function eva(id){var TheTextBox,source;function erra(t){return{signal:[{name:["tspan",["tspan",{class:"error h5"},"Error: "],t.message]}]}}if(TheTextBox=document.getElementById(id),TheTextBox.type&&"textarea"===TheTextBox.type)try{source=eval("("+TheTextBox.value+")")}catch(t){return erra(t)}else try{source=eval("("+TheTextBox.innerHTML+")")}catch(t){return erra(t)}if("[object Object]"!==Object.prototype.toString.call(source))return erra({message:'[Semantic]: The root has to be an Object: "{signal:[...]}"'});if(source.signal){if("[object Array]"!==Object.prototype.toString.call(source.signal))return erra({message:'[Semantic]: "signal" object has to be an Array "signal:[]"'})}else if(source.assign){if("[object Array]"!==Object.prototype.toString.call(source.assign))return erra({message:'[Semantic]: "assign" object hasto be an Array "assign:[]"'})}else if(source.reg);else{if(!source.fsm)return erra({message:'[Semantic]: "signal:[...]", "assign:[...]" or "fsm:[...]" property is missing inside the root Object'});if("[object Array]"!==Object.prototype.toString.call(source.fsm))return erra({message:'[Semantic]: "fsm" object has to be an Array "fsm:[]"'})}return source}module.exports=eva},{}],5:[function(t,e,n){"use strict";e.exports=function(t){var e=0,n=0,r=[];return t.forEach(function(t){"vvv-2"===t||"vvv-3"===t||"vvv-4"===t||"vvv-5"===t?n+=1:0!==n&&(r.push(e-(n+1)/2),n=0),e+=1}),0!==n&&r.push(e-(n+1)/2),r}},{}],6:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e,n,r,a){var o=[];if(Array.isArray(t.state)&&t.state.length)for(var s=0;s<t.state.length;s++)o.push(g(n,t.state[s]));else t.state&&!Array.isArray(t.state)?o.push(g(n,t.state)):o.push(e);if(o.length){var i={},l=[],c=[];i.id=a.tid++,i.p={},i.start=e,i.p.pse0={x:0,y:0},i.p.psh0={x:0,y:0},1<o.length&&(i.p.pmhs={x:0,y:0},i.p.pm={x:0,y:0},i.p.pmhe={x:0,y:0}),i.end=[];for(var p=0;p<o.length;p++)i.end.push(o[p]),i.p["peh"+p]={x:0,y:0},i.p["pea"+p]={x:0,y:0},i.p["pee"+p]={x:0,y:0};for(y(v,"t",b,t,i),i.drawn=!1,n[e.id].links.push(i),p=0;p<o.length;p++)n[o[p].id].links.push(i);if(r.push(i),(l=m(r,o,e.refid)).length)for(var u=0;u<l.length;u++)l[u].pair=!0,i.pair=!0;else i.pair=!1;if((c=m(r,e.refid,o)).length)for(var h=0;h<c.length;h++)c[h].tsame=c}}function f(t,e,n){function r(t,e){if(t){var n={content:t};for(var r in e)"simple"==e[r].type?n[r]=!!e[r].level:"option"==e[r].type&&(n[r]=e[r].data[e[r].level]);return n}}if(t){var a=0,o=0,s=[],i={bf:{level:0,type:"simple"},it:{level:0,type:"simple"},fs:{level:0,type:"option",data:[null]}},l=[],c=[];for(n&&((n.textstyle&&n.textstyle.bf||n[e]&&n[e].bf)&&i.bf.level++,(n.textstyle&&n.textstyle.it||n[e]&&n[e].it)&&i.it.level++,n.textstyle&&n.textstyle.fs&&(i.fs.data[i.fs.level]=n.textstyle.fs),n[e]&&n[e].fs&&(i.fs.data[i.fs.level]=n[e].fs));a<t.length;)if(":"==t[a]){for(var p in a++,i)if(t.substr(a,p.length)==p){var u=r(t.substring(o,a-1),i),h=!1;if("simple"==i[p].type&&"{"==t[a+p.length])h=!0,i[p].level++,s.push(p),o=a=a+p.length+1;else if("option"==i[p].type&&"("==t[a+p.length]){var f=t.substr(a+p.length).match(/\((.*?)\)\{/);if(f&&!f.index)switch(p){case"fs":isNaN(f[1])||(h=!0,i[p].level++,i[p].data.push(parseInt(f[1])),s.push(p),o=a=a+p.length+f[0].length)}}if(u&&h){c.push(u);break}}}else if("}"==t[a]){a++;var d=s.pop();d&&((u=r(t.substring(o,a-1),i))&&c.push(u),i[d].level--,"option"==i[d].type&&i[d].data.pop(),o=a)}else"\n"==t[a]?(a++,(u=r(t.substring(o,a-1),i))?c.push(u):c.length||c.push({content:" "}),l.push(c),c=[],o=a):a++;return(u=r(t.substring(o,t.length),i))&&c.push(u),l.push(c),l}}function d(t,e){if(t){var n=x(t);e||(e={});for(var r=0;r<n.length;r++){var a=n[r].match(/(.*)\((.*?)\)|(.*)/);if(a[1])switch(a[1]){case"fs":e.hasOwnProperty(a[1])||(e[a[1]]=a[2])}else if(a[3])switch(a[3]){case"bf":case"it":e.hasOwnProperty(a[3])||(e[a[3]]=!0)}}return e}return e}function y(t,e,n,r,a){function o(t,e,n,r){var a=[];if(r.pt&&(a=r.pt),t)if(Array.isArray(t))for(var o=0;o<t.length&&o<(1<r.end.length?r.end.length+1:r.end.length);o++){var s;void 0===t[o]?void 0===a[o]&&a.push(null):void 0===a[o]||null===a[o]?((s={x:0,y:0,xoff:0,yoff:0})[e]=f(t[o],n,r),a[o]=s):a[o][e]=f(t[o],n,r)}else void 0===t?a[0]=null:void 0===a[0]||null===a[0]?((s={x:0,y:0,xoff:0,yoff:0})[e]=f(t,n,r),a[0]=s):a[0][e]=f(t,n,r);return a}function s(t,e,n,r){var a,o,s=0;if(r.def&&n){var i=x(r.def);s=i.length}for(var l=-1;l<s;l++){a=void 0;for(var c=1;c<e.length;c++){var p=e[c];if(l<0){if(p in r){a=r[p];break}var u;switch(t){case"s":u="state";break;case"t":break;case"n":u="id"}if(n&&r[u]&&r[u]in n&&p in n[r[u]]){a=n[r[u]][p];break}}else if(n&&i[l]in n&&p in n[i[l]]){a=n[i[l]][p];break}}if(a){if(!e[0].match(/.*style$/))break;o=d(a,o)}}return o||a}function i(t){if(""===t)return!1;if("inherit"===t)return!1;if("transparent"===t)return!1;var e=document.createElement("img");return e.style.color="rgb(0, 0, 0)",e.style.color=t,"rgb(0, 0, 0)"!==e.style.color||(e.style.color="rgb(255, 255, 255)",e.style.color=t,"rgb(255, 255, 255)"!==e.style.color)}for(var l=0;l<t[e].length;l++){var c=t[e][l][0],p=s(e,t[e][l],n,r),u="";switch(c){case"name":u||(u="namestyle"),p||(p=r.state);case"action":u||(u="actionstyle");case"cond":if(u||(u="conditionstyle"),"t"==e){p&&(a.pt=o(p,c,u,a));break}case"text":Array.isArray(p)&&"s"==e&&(p=p[0]),a[c]=f(p,u,a);break;case"fill":case"basecolor":case"textcolor":case"namecolor":case"linecolor":case"actioncolor":case"conditioncolor":if(!i(p)&&"undefined"!=typeof customColors){for(var h in customColors)if(p in customColors[h]){a[c]=customColors[h][p];break}a[c]||(a[c]=void 0);break}default:a[c]=p}}}function m(t,e,n){var r=[],a=[],o=[],s=[],i=[];Array.isArray(e)?a=e:a.push({refid:e}),Array.isArray(n)?s=n:s.push({refid:n});for(var l=0;l<t.length;l++){var c=0,p=0;if(Array.isArray(t[l].start)?o=t[l].start:o.push({refid:t[l].start.refid}),Array.isArray(t[l].end)?i=t[l].end:i.push({refid:t[l].end.refid}),a.length==o.length&&s.length==i.length){for(var u=0;u<a.length;u++)a[u]==o[u]&&c++;if(c==a.length){for(u=0;u<s.length;u++)s[u]==i[u]&&p++;p==s.length&&r.push(t[l])}}}return r}function g(t,e){for(var n=0;n<t.length;n++)if(t[n].refid==e)return t[n];return!1}function x(t){var e=[];return Array.isArray(t)?e=t:e.push(t),e}for(var v={s:[["textstyle","textstyle"],["namestyle","namestyle"],["actionstyle","actionstyle","actstyle"],["name","name"],["action","action"],["fill","fill"],["basecolor","color"],["textcolor","textcolor"],["namecolor","namecolor"],["linecolor","linecolor"],["actioncolor","actioncolor","actcolor"]],t:[["textstyle","textstyle"],["conditionstyle","conditionstyle","condstyle"],["actionstyle","actionstyle","actstyle"],["cond","condition","cond"],["action","action"],["basecolor","color"],["textcolor","textcolor"],["conditioncolor","conditioncolor","condcolor"],["linecolor","linecolor"],["actioncolor","actioncolor","actcolor"]],n:[["text","text"],["fill","fill"],["textcolor","textcolor"]]},n=[],r=[],a={tid:0},o=[],s={},b=t.def,i=0;i<t.fsm.length;i++){var l={},c=t.fsm[i];l.id=i,l.refid=c.state,l.zerostate=0==c.state||"0"==c.state,l.links=[],y(v,"s",b,c,l),n.push(l)}for(i=0;i<t.fsm.length;i++){var p=g(n,(c=t.fsm[i]).state);if(c.next)for(var u=x(c.next),h=0;h<u.length;h++)e(u[h],p,n,r,a)}if(t.notes)for(var _=0;_<t.notes.length;_++){var w={},k=t.notes[_];w.id=_,w.refid=k.id,w.pc={},w.pp={},y(v,"n",b,k,w),o.push(w)}return t.coord&&(s=t.coord),{states:n,transitions:r,notes:o,coordinates:s}}},{}],7:[function(t,e,n){"use strict";var m=Object.assign(t("d3-selection"),t("d3-array")),g=10,x=50,v=100;function i(n){var r,a=n.vb.y<=0&&0<=n.vb.y+n.vb.height,o=n.vb.x<=0&&0<=n.vb.x+n.vb.width,s=Math.floor(n.vb.height/x+1),i=Math.floor(n.vb.width/x+1),l=Math.floor(n.vb.height/v+1),c=Math.floor(n.vb.width/v+1),t=n.vb.height/g+1-s,e=n.vb.width/g+1-i;r=n.vb.y;var p=m.range(t).map(function(t){var e;return r%x||(r+=g),e=r,r+=g,{x1:n.vb.x,y1:e,x2:n.vb.x+n.vb.width,y2:e}});r=n.vb.x;var u=m.range(e).map(function(t){var e;return r%x||(r+=g),e=r,r+=g,{x1:e,y1:n.vb.y,x2:e,y2:n.vb.y+n.vb.height}});for(r=n.vb.y;r%x;)r+=g;var h=m.range(s).map(function(t){var e;return r||(r+=x),a&&s-1<=t&&(r=0),e=r,r+=x,{x1:n.vb.x,y1:e,x2:n.vb.x+n.vb.width,y2:e}});for(r=n.vb.x;r%x;)r+=g;var f=m.range(i).map(function(t){var e;return r||(r+=x),o&&i-1<=t&&(r=0),e=r,r+=x,{x1:e,y1:n.vb.y,x2:e,y2:n.vb.y+n.vb.height}});for(r=n.vb.y;r%v;)r+=g;var d=m.range(l).map(function(t){var e;return r||(r+=v),a&&l-1<=t&&(r=0),e=r,r+=v,{x1:n.vb.x,y1:e,x2:n.vb.x+n.vb.width,y2:e}});for(r=n.vb.x;r%v;)r+=g;var y=m.range(c).map(function(t){var e;return r||(r+=v),o&&c-1<=t&&(r=0),e=r,r+=v,{x1:e,y1:n.vb.y,x2:e,y2:n.vb.y+n.vb.height}});return{ldx:p,ldy:u,mldx:h,mldy:f,oldx:a,oldy:o,tldx:d,tldy:y}}function l(t){var e=t.datum(),n=t.attr("id"),r=i(e),a=t.select("#"+n+"_reg"),o=t.select("#"+n+"_main"),s=t.select("#"+n+"_text");a.selectAll("line.gridxelem").data(r.ldx).attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}),a.selectAll("line.gridyelem").data(r.ldy).attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}),o.selectAll("line.gridxelem").data(r.mldx).attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}).each(function(t){r.oldx&&!t.y1?m.select(this).classed("gridorigin",!0):m.select(this).classed("gridorigin",!1)}),o.selectAll("line.gridyelem").data(r.mldy).attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}).each(function(t){r.oldy&&!t.x1?m.select(this).classed("gridorigin",!0):m.select(this).classed("gridorigin",!1)}),s.selectAll("text.gridxelem").data(r.tldx).attr("x",function(t){return t.x1+5}).attr("y",function(t){return t.y1}).text(function(t){return t.y1}).each(function(t){r.oldx&&!t.y1?m.select(this).classed("gridorigin",!0):m.select(this).classed("gridorigin",!1)}),s.selectAll("text.gridyelem").data(r.tldy).attr("x",function(t){return t.x1}).attr("y",function(t){return t.y1}).text(function(t){return t.x1}).each(function(t){r.oldy&&!t.x1?m.select(this).classed("gridorigin",!0):m.select(this).classed("gridorigin",!1)})}e.exports={create:function(t){var e=t.datum(),n=t.attr("id"),r=i(e);m.select("#"+n).selectAll("g").remove();var a=t.append("g").attr("id",n+"_reg"),o=t.append("g").attr("id",n+"_main"),s=t.append("g").attr("id",n+"_text");a.selectAll("line:not(.gridyelem)").data(r.ldx).enter().append("line").classed("gridxelem",!0),a.selectAll("line:not(.gridxelem)").data(r.ldy).enter().append("line").classed("gridyelem",!0),o.selectAll("line:not(.gridyelem)").data(r.mldx).enter().append("line").classed("gridxelem",!0),o.selectAll("line:not(.gridxelem)").data(r.mldy).enter().append("line").classed("gridyelem",!0),o.selectAll("line.gridxelem").filter(function(t,e){return e==o.selectAll("line.gridxelem").size()-1}).raise(),o.selectAll("line.gridyelem").filter(function(t,e){return e==o.selectAll("line.gridyelem").size()-1}).raise(),s.selectAll("text:not(.gridyelem)").data(r.tldx).enter().append("text").classed("gridxelem",!0),s.selectAll("text:not(.gridxelem)").data(r.tldy).enter().append("text").classed("gridyelem",!0),l(t)},update:l,grid:{widthMin:g,widthMain:x,widthText:v}}},{"d3-array":45,"d3-selection":48}],8:[function(t,e,n){"use strict";t("./create-element");var B=t("./w3"),O=Object.assign(t("d3-selection"),t("d3-drag")),j=t("./fsm-gen-grid"),C=t("./fsm-json-update");e.exports=function(a,o,s){for(var t,e,n,r,i,l={x:0,y:0};o.childNodes.length;)o.removeChild(o.childNodes[0]);O.select(o).style("position","relative").style("width","100%").style("height","100%"),s.coordinates&&s.coordinates.offset&&(l={x:0<s.coordinates.offset.length?s.coordinates.offset[0]:0,y:1<s.coordinates.offset.length?s.coordinates.offset[1]:0}),t={x:l.x,y:l.y,vb:{x:l.x,y:l.y,width:0,height:0}},n="/*<![CDATA[*/     line { stroke-width: 1; } \tg[id$=_reg] line { stroke: rgb(240,240,240); } \tg[id$=_main] line { stroke-width: 2; stroke: rgb(208,208,208); } \tg[id$=_main] line.gridorigin { stroke: #ff8000; } \tg[id^=svghelp_] line.gridcrossstate { stroke: red !important; } \tg[id$=_text] text { font-size: 16px; paint-order: stroke; fill: rgb(160,160,160); stroke: white; stroke-width: 3; } \tg[id$=_text] text.gridorigin { fill: #ff8000; } \tg[id$=_text] text.gridxelem { dominant-baseline: central; text-anchor: start; } \tg[id$=_text] text.gridyelem { dominant-baseline: text-before-edge; text-anchor: middle; }",n+="/*]]>*/",O.select(o).append("svg").datum(t).attr("id","svggrid_"+a).attr("xmlns",B.svg).attr("xmlns:xlink",B.xlink).attr("width",function(t){return t.vb.width}).attr("height",function(t){return t.vb.height}).attr("viewBox",function(t){return t.vb.x+" "+t.vb.y+" "+t.vb.width+" "+t.vb.height}).style("position","absolute").style("top",0).style("left",0).append("style").html(n),e=O.select(o).append("svg").datum(t).attr("id","svgcontent_"+a).attr("xmlns",B.svg).attr("xmlns:xlink",B.xlink).attr("width",function(t){return t.vb.width}).attr("height",function(t){return t.vb.height}).attr("viewBox",function(t){return t.vb.x+" "+t.vb.y+" "+t.vb.width+" "+t.vb.height}).call(O.drag().subject(function(t){return t}).on("drag",function(e){var n,t,r,a;e.x-=O.event.dx,e.y-=O.event.dy,t=j.grid.widthMin,r=e.x,a=e.y,n={x:Math.round(r/t)*t,y:Math.round(a/t)*t},O.select(o).selectAll("svg").each(function(t){t.x=e.x,t.y=e.y,t.vb.x=n.x,t.vb.y=n.y,O.select(this).attr("viewBox",function(t){return t.vb.x+" "+t.vb.y+" "+t.vb.width+" "+t.vb.height}),/^svggrid_/.test(O.select(this).attr("id"))&&j.update(O.select(this))})}).on("end",function(t){C(a,o,!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}(s.coordinates))})).style("position","absolute").style("top",0).style("left",0),n="/*<![CDATA[*/     .state {  }     .state ellipse {  }     .state text { text-anchor: middle; font-family: Arial, Gadget, sans-serif; font-size: 21px; }     .state text:not(:first-of-type) { font-size: 16px; }     .state text > tspan > tspan { dominant-baseline: alphabetic; }     .state line { stroke: black; stroke-width: 1; stroke-linecap: round; }     .statezero ellipse { fill: none; }     .statezero text { fill: rgb(128,128,128); /*paint-order: stroke; stroke: white; stroke-width: 3;*/ }     .statezeroact ellipse {  }     .statezeroact text { fill: red; }     .statezeroactc ellipse {  }     .statereg ellipse { fill: #FFF; stroke: black; stroke-width: 1; }     .statereg text { fill: black; }     .stateregact ellipse { /*fill: rgb(255,239,239);*/ stroke: red; stroke-width: 2; }     .stateregact text { fill: red; }     .stateregact line { stroke: red; }     .transition path { fill: none; stroke-width: 3; stroke-linecap: round; }     .transition rect { fill: #FFF; fill-opacity: 0.9; }     .transition text { text-anchor: middle; font-family: Arial, Gadget, sans-serif; font-size: 16px; /*paint-order: stroke; stroke: white; stroke-width: 3;*/ }     .transition text > tspan > tspan { dominant-baseline: alphabetic; }     .transition line { stroke: black; stroke-width: 1; stroke-linecap: round; }     .transitionzero path { marker-end: url(#trmarker_"+a+"_zero); stroke: rgb(128,128,128); }     .transitionreg path { stroke: black; }     .transitionreg path:only-of-type, .transitionreg path:not(:first-of-type):not(:only-of-type) { marker-end: url(#trmarker_"+a+"_reg); }     .transitionact path { stroke: red; }     .transitionact path:only-of-type, .transitionact path:not(:first-of-type):not(:only-of-type) { marker-end: url(#trmarker_"+a+"_act); }     .transitionact text { fill: red; }     .transitionact line { stroke: red; }     .transitionactc path:only-of-type, .transitionactc path:not(:first-of-type):not(:only-of-type) { marker-end: url(#trmarker_"+a+"_actc); }     #trmarker_"+a+"_zero path { fill: rgb(128,128,128); }     #trmarker_"+a+"_reg path { fill: black; }     #trmarker_"+a+'_act path { fill: red; }     .note path { fill: lightyellow; stroke-width: 1; stroke: black; stroke-opacity: 0.25; }     .note rect { opacity: 0; }     .note text { font-family: Arial, Gadget, sans-serif; font-size: 13px; }     .note text > tspan > tspan { dominant-baseline: alphabetic; }     .note text > tspan:first-of-type { font-size: 0.8em; text-decoration: underline; }     .note text > tspan:not(:first-of-type) { dominant-baseline: alphabetic; }     .noteact path:not(:first-of-type) { fill: url("#diagonalHatch"); opacity: 1; }     .noteact path:first-of-type { stroke-width: 3; stroke: red; stroke-opacity: 0.5; stroke-linejoin: round; }     .noteactb path:not(:first-of-type) { opacity: 0; }     .noteactb rect { fill: url("#diagonalHatch"); opacity: 1; stroke: red; stroke-width: 3; stroke-opacity: 0.5; }     .textbf { font-weight: bold; }     .textit { font-style: italic; }';for(var c=0;c<s.states.length;c++)for(var p=s.states[c],u=p.zerostate?[{selector:"#state_"+a+"_"+c+" .stext text",props:[{cssprop:"fill",keyval:p.textcolor?p.textcolor:p.basecolor}]}]:[{selector:"#state_"+a+"_"+c+" ellipse",props:[{cssprop:"fill",keyval:p.fill},{cssprop:"stroke",keyval:p.basecolor}]},{selector:"#state_"+a+"_"+c+" .stext text",props:[{cssprop:"fill",keyval:p.textcolor}]},{selector:"#state_"+a+"_"+c+" .stext line",props:[{cssprop:"stroke",keyval:p.linecolor?p.linecolor:p.basecolor}]},{selector:"#state_"+a+"_"+c+" .stext .stextname",props:[{cssprop:"fill",keyval:p.namecolor}]},{selector:"#state_"+a+"_"+c+" .stext .stextaction",props:[{cssprop:"fill",keyval:p.actioncolor}]}],h=0;h<u.length;h++){for(var f=u[h],d="",y=0;y<f.props.length;y++){var m=f.props[y].cssprop;(S=f.props[y].keyval)&&(d+=" "+m+": "+S+";")}""!=d&&(n+=f.selector+" {"+d+" } ")}for(var g=0;g<s.transitions.length;g++)for(var x=s.transitions[g],v=x.start.zerostate?[{selector:"#transition_"+a+"_"+g+" path",props:[{cssprop:"stroke",keyval:x.basecolor},{cssprop:"marker-end",keyval:x.basecolor?"url(#trmarker_"+a+"_"+g+")":void 0}]},{selector:"#trmarker_"+a+"_"+g+" path",props:[{cssprop:"fill",keyval:x.basecolor}]}]:[{selector:"#transition_"+a+"_"+g+" path",props:[{cssprop:"stroke",keyval:x.basecolor}]},{selector:1<x.end.length?"#transition_"+a+"_"+g+" path:not(:first-of-type)":"#transition_"+a+"_"+g+" path",props:[{cssprop:"marker-end",keyval:x.basecolor?"url(#trmarker_"+a+"_"+g+")":void 0}]},{selector:"#trmarker_"+a+"_"+g+" path",props:[{cssprop:"fill",keyval:x.basecolor}]},{selector:"#transition_"+a+"_"+g+" .trtext text",props:[{cssprop:"fill",keyval:x.textcolor}]},{selector:"#transition_"+a+"_"+g+" .trtext line",props:[{cssprop:"stroke",keyval:x.linecolor?x.linecolor:x.basecolor}]},{selector:"#transition_"+a+"_"+g+" .trtext .trtextcond",props:[{cssprop:"fill",keyval:x.conditioncolor}]},{selector:"#transition_"+a+"_"+g+" .trtext .trtextaction",props:[{cssprop:"fill",keyval:x.actioncolor}]}],b=0;b<v.length;b++){var _=v[b];for(d="",y=0;y<_.props.length;y++)m=_.props[y].cssprop,(S=_.props[y].keyval)&&(d+=" "+m+": "+S+";");""!=d&&(n+=_.selector+" {"+d+" } ")}for(var w=0;w<s.notes.length;w++)for(var k=s.notes[w],M=[{selector:"#note_"+a+"_"+w+" > path:first-of-type",props:[{cssprop:"fill",keyval:k.fill}]},{selector:"#note_"+a+"_"+w+" text",props:[{cssprop:"fill",keyval:k.textcolor}]}],A=0;A<M.length;A++){var N=M[A];for(d="",y=0;y<N.props.length;y++){var S;m=N.props[y].cssprop,(S=N.props[y].keyval)&&(d+=" "+m+": "+S+";")}""!=d&&(n+=N.selector+" {"+d+" } ")}n+="     :root { --handlecolorneighbor: rgba(51,204,51,0.5);\t--handlecolorhover: rgba(255,0,0,0.5); --handlecolornormal: rgba(0,0,255,0.5); }     .state { cursor: pointer; }     text { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }     .transition { cursor: pointer; }     .trhandle > circle { cursor: pointer; fill: var(--handlecolornormal); stroke-width: 1; stroke: var(--handlecolornormal); }     .trhandle > line { stroke: var(--handlecolornormal); stroke-width: 1; stroke-dasharray: 3,1; }     .trhandleact > circle { fill: var(--handlecolorhover); stroke-width: 1; stroke: var(--handlecolorhover); }     .trhandleact > line { stroke: var(--handlecolorhover); }     .trhandleactc > circle { fill: var(--handlecolorneighbor); stroke-width: 1; stroke: var(--handlecolorneighbor); }     .trhandleactc > line { stroke: var(--handlecolorneighbor); }     .note { cursor: pointer; }     .nthandle > circle { cursor: pointer; fill: var(--handlecolornormal); stroke-width: 1; stroke: var(--handlecolornormal); }     .nthandleact > circle { fill: var(--handlecolorhover); stroke-width: 1; stroke: var(--handlecolorhover); }     #diagonalHatch path { stroke-width: 3; stroke: rgba(255,0,0,0.15); }",n+="/*]]>*/",e.append("style").html(n),r=e.append("defs").each(function(t){for(var e=["zero","reg"],n=0;n<s.transitions.length;n++)s.transitions[n].basecolor&&e.push(n+"");for(var r=0;r<e.length;r++)O.select(this).append("marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("markerWidth",20).attr("markerHeight",10).attr("refX",0).attr("refY",5).attr("viewBox","0 0 20 10").attr("id","trmarker_"+a+"_"+e[r]).classed("marker",!0).append("path").attr("d","M0 0 20 5 0 10z")}),i=[{id:"hl_state",borderfill:"rgba(255,0,0,0.5)",border:"rgba(255,0,0,0.5)"},{id:"hl_state_neighbor",borderfill:"rgba(51,204,51,0.25)",border:"rgba(51,204,51,0.5)"},{id:"hl_transition",borderfill:"rgba(255,0,0,0.25)",border:"rgba(255,0,0,0.5)"},{id:"hl_transition_neighbor",borderfill:"rgba(51,204,51,0.25)",border:"rgba(51,204,51,0.5)"}];for(var E=0;E<i.length;E++){var z=r.append("filter").attr("id",i[E].id).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");z.append("feFlood").attr("flood-color",i[E].borderfill).attr("result","basebf"),z.append("feFlood").attr("flood-color",i[E].border).attr("result","baseb"),z.append("feMorphology").attr("result","dilfat").attr("in","SourceAlpha").attr("operator","dilate").attr("radius","4"),z.append("feMorphology").attr("result","dilthin").attr("in","SourceAlpha").attr("operator","dilate").attr("radius","3"),z.append("feComposite").attr("result","dropfouter").attr("in","basebf").attr("in2","dilfat").attr("operator","in"),z.append("feComposite").attr("result","droptouter").attr("in","baseb").attr("in2","dilfat").attr("operator","in"),z.append("feComposite").attr("result","dropfat").attr("in","dropfouter").attr("in2","SourceAlpha").attr("operator","out"),z.append("feComposite").attr("result","dropthin").attr("in","droptouter").attr("in2","dilthin").attr("operator","out"),z.append("feBlend").attr("result","border").attr("in","dropfat").attr("in2","dropthin").attr("mode","normal"),z.append("feBlend").attr("in","SourceGraphic").attr("in2","border").attr("mode","normal")}r.append("pattern").attr("id","diagonalHatch").attr("width","8").attr("height","8").attr("patternUnits","userSpaceOnUse").append("path").attr("d","M-2,2 l4,-4 M0,8 l8,-8 M6,10 l4,-4"),e.append("g").attr("id","graph_"+a)}},{"./create-element":2,"./fsm-gen-grid":7,"./fsm-json-update":10,"./w3":38,"d3-drag":47,"d3-selection":48}],9:[function(t,e,n){"use strict";e.exports={getRangeInJsonString:function(t,e,n,r,a){var o,s,i,l,c,p,u,h,f=e,d=[];for(c=l=-1,s=o=0;(h=f.exec(t))&&d.push({start:h.index,end:f.lastIndex}),h;);for(var y=0;y<d.length;y++){u=!1;for(var m=0;m<d[y].start;m++)if(u)t[m]==p&&"\\"!=t[m-1]&&(u=!1);else switch(t[m]){case"{":o++;break;case"}":o--;break;case"[":s++;break;case"]":s--;break;case'"':case"'":p=t[m],u=!0}if(o==n&&s==r){switch(i=l=d[y].start,s=o=0,u=!1,a){case"arr":for(;"["!=t[i];)i++;s++;break;case"obj":for(;"{"!=t[i];)i++;o++}for(var g=i+1;g<t.length;g++){if(u)t[g]==p&&"\\"!=t[g-1]&&(u=!1);else switch(t[g]){case"{":o++;break;case"}":o--;break;case"[":s++;break;case"]":s--;break;case'"':case"'":p=t[g],u=!0}if(!o&&!s){c=g;break}}break}}return{beginIndex:l,endIndex:c}},deleteElementFromJsonString:function(t,e,n){var r,a,o;r=t.substring(0,e),a=t.substring(n+1),o=-1;for(var s=0;s<a.length;s++)if(/\S/.test(a[s])){","==a[s]&&(o=s);break}if(0<=o)for(var i=r.length-1;0<=i;i--)if(/\S/.test(r[i])){if("{"==r[i]||"["==r[i])for(s=o+1;s<a.length;s++)if(/\S/.test(a[s])){a=a.substring(s);break}break}return t=r+a},insertElementInJsonString:function(t,e,n){var r,a,o,s;r=t.substring(0,e),a=t.substring(e+1),o=!1,s="";for(var i=r.length-1;0<=i;i--)if(/\S/.test(r[i])){if("{"!=r[i]&&"["!=r[i]&&","!=r[i]){r+=",";do{if(/\s/.test(r[--i])?"\n"!=r[i]?s+=r[i]:o=!0:s="",o){r+="\n"+s;break}}while("\n"!=r[i]||0<i)}break}for(var l=0;l<a.length;l++)if(/\S/.test(a[l])){a="}"!=a[l]&&"]"!=a[l]&&","!=a[l]?", "+a:"\n"+a;break}return t=r+(n=n.replace(/\n/g,"\n"+s).replace(/\t/g,s))+a}}},{}],10:[function(t,e,n){"use strict";var l=t("d3-selection"),c=t("./fsm-json-edit");function p(t,e){var n,r,a={};return r=l.select(e).select("#svgcontent_"+t).datum(),a.offset=[],a.states=[],a.transitions=[],a.notes=[],n="coord: {\n",a.offset=[r.vb.x,r.vb.y],n+="\toffset: "+JSON.stringify(a.offset),n+=",\n",l.select(e).select("#states_"+t).selectAll("g[id^=state_"+t+"_]").each(function(t){var e=[];e.push(t.refid),e.push(Math.round(t.x)),e.push(Math.round(t.y)),a.states.push(e)}),n+="\tstates: "+JSON.stringify(a.states),n+=",\n",l.select(e).select("#transitions_"+t).selectAll("g[id^=transition_"+t+"_]").each(function(t){var e=[];e.push(t.start.refid);for(var n=0;n<t.end.length;n++)e.push(t.end[n].refid);e.push(Math.round(t.p.psh0.x)),e.push(Math.round(t.p.psh0.y)),1<t.end.length&&(e.push(Math.round(t.p.pm.x)),e.push(Math.round(t.p.pm.y)),e.push(Math.round(t.p.pmhe.x)),e.push(Math.round(t.p.pmhe.y)),e.push(Math.round(t.p.pmhs.x)),e.push(Math.round(t.p.pmhs.y)));for(n=0;n<t.end.length;n++)e.push(Math.round(t.p["peh"+[n]].x)),e.push(Math.round(t.p["peh"+[n]].y));if(t.hasOwnProperty("pt"))for(var r=0;r<t.pt.length;r++)null!==t.pt[r]&&(e.push(Math.round(t.pt[r].xoff)),e.push(Math.round(t.pt[r].yoff)));a.transitions.push(e)}),n+="\ttransitions: "+JSON.stringify(a.transitions),n+=",\n",l.select(e).select("#notes_"+t).selectAll("g[id^=note_"+t+"_]").each(function(t){var e=[];e.push(t.refid),e.push(Math.round(t.pc.x)),e.push(Math.round(t.pc.y)),e.push(Math.round(t.pp.x)),e.push(Math.round(t.pp.y)),a.notes.push(e)}),n+="\tnotes: "+JSON.stringify(a.notes),n=(n+="\n}").replace(/"/g,"'")}e.exports=function(t,e,n){var r,a,o,s,i=l.window(e);r=(s=i.document.getElementById("InputJSON_"+t)).value,n?(o=c.getRangeInJsonString(r,/\s*,?\s*['"]?coord['"]?\s*:/g,1,0,"obj"),r=c.deleteElementFromJsonString(r,o.beginIndex,o.endIndex),r=c.insertElementInJsonString(r,o.beginIndex,p(t,e))):(a=c.getRangeInJsonString(r,/\s*,?\s*['"]?fsm['"]?\s*:/g,1,0,"arr"),r=c.insertElementInJsonString(r,a.endIndex+1,p(t,e))),s.value=r,localStorage.waveform=r,i.WaveDrom&&i.WaveDrom.cm&&i.WaveDrom.cmChangeFunction&&(i.WaveDrom.cm.off("change",i.WaveDrom.cmChangeFunction),i.WaveDrom.cm.setValue(r),i.WaveDrom.cm.on("change",i.WaveDrom.cmChangeFunction))}},{"./fsm-json-edit":9,"d3-selection":48}],11:[function(t,e,n){"use strict";var M=Object.assign(t("d3-selection"),t("d3-drag")),A=t("./fsm-gen-grid"),N=t("./fsm-json-update"),r=t("./fsm-resize-svg"),g=20,S=10;function E(t,e,n,r){M.select(e).select("#note_"+t+"_"+n.id).classed("note"+r,!0),M.select(e).select("#nthandle_"+t+"_"+n.id).classed("nthandle"+r,!0)}function z(t,e,n,r){M.select(e).select("#note_"+t+"_"+n.id).classed("note"+r,!1),M.select(e).select("#nthandle_"+t+"_"+n.id).classed("nthandle"+r,!1)}function _(t,e,n,r){switch(r){case"n":M.select(e).select("#transition_"+t+"_"+n.id).attr("filter","url(#hl_transition_neighbor)"),M.select(e).select("#trhandle_"+t+"_"+n.id).classed("trhandleactc",!0);break;default:M.select(e).select("#transition_"+t+"_"+n.id).attr("filter","url(#hl_transition)"),M.select(e).select("#trhandle_"+t+"_"+n.id).classed("trhandleact",!0)}}function w(t,e,n){M.select(e).select("#transition_"+t+"_"+n.id).attr("filter",null),M.select(e).select("#trhandle_"+t+"_"+n.id).classed("trhandleactc",!1),M.select(e).select("#trhandle_"+t+"_"+n.id).classed("trhandleact",!1)}function k(t,e,n,r){switch(r){case"n":M.select(e).select("#state_"+t+"_"+n.id).attr("filter","url(#hl_state_neighbor)");break;default:M.select(e).select("#state_"+t+"_"+n.id).attr("filter","url(#hl_state)")}}function B(t,e,n){M.select(e).select("#state_"+t+"_"+n.id).attr("filter",null)}function a(t,e,n,r){var a,o;return a=(r.x+t.x)/2,o=(r.y+t.y)/2,{x:(a+(n.x+e.x)/2)/2,y:(o+(n.y+e.y)/2)/2}}function m(t,e,n,r,a,o,s){var i,l,c,p,u,h,f,d,y,m,g,x;return i=e.x-t.x,l=e.y-t.y,c=a.x-r.x,p=a.y-r.y,u=e.x-n.x,h=e.y-n.y,y=Math.sqrt(Math.pow(u,2)+Math.pow(h,2)),f=o?Math.atan2(p,c):Math.atan2(l,i),s?(d=Math.sqrt(Math.pow(i,2)+Math.pow(l,2)),m=Math.sqrt(Math.pow(c,2)+Math.pow(p,2))/d):m=1,g=y*m*Math.cos(f),x=y*m*Math.sin(f),{x:a.x+g,y:a.y+x}}function i(t,e,n,r,a,o){var s,i,l,c,p,u,h,f,d,y,m,g,x,v,b,_,w;return t.x==e.x&&t.y==e.y?(v=r.x-t.x,b=r.y-t.y,_=n.x+v/2,w=n.y+b/2):(s=e.x-t.x,i=e.y-t.y,h=Math.atan2(i,s),m=Math.sqrt(Math.pow(s,2)+Math.pow(i,2)),l=n.x-t.x,c=n.y-t.y,f=Math.atan2(c,l),g=Math.sqrt(Math.pow(l,2)+Math.pow(c,2)),d=f-h,p=a.x-r.x,u=a.y-r.y,y=Math.atan2(u,p)+d,x=Math.sqrt(Math.pow(p,2)+Math.pow(u,2))/m*g,o?(v=x*Math.cos(y),b=x*Math.sin(y)):(v=g*Math.cos(y),b=g*Math.sin(y)),_=r.x+v,w=r.y+b),{x:_,y:w}}function x(t,e){var n,r;return n=e.x-t.x,r=e.y-t.y,Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}function v(t,e,n){var r,a,o,s,i,l;return r=e.x-t.x,a=e.y-t.y,o=Math.atan2(a,r),i=((s=Math.sqrt(Math.pow(r,2)+Math.pow(a,2)))+n)*Math.cos(o),l=(s+n)*Math.sin(o),{x:t.x+i,y:t.y+l}}function b(t,e){var n,r,a,o,s,i=!1;return n=e.x-t.x,r=e.y-t.y,(a=Math.atan2(r,n))>Math.PI/2&&(a=-1*(a-Math.PI),i=!0),a<-Math.PI/2&&(a=-1*(a+Math.PI),i=!0),s=(o=Math.sqrt(1/(1/Math.pow(t.a,2)+Math.pow(Math.tan(a),2)/Math.pow(t.b,2))))*Math.tan(a),{x:t.x+(i?-o:o),y:t.y+s}}function O(t,e,n){var r,a,o,s,i,l;return r=e.x-t.x,a=e.y-t.y,o=Math.atan2(a,r)+n,s=Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),i=(s*=n?Math.abs((Math.abs(n)>Math.PI/2?Math.PI/2:n)/(Math.PI/2)):.5)*Math.cos(o),l=s*Math.sin(o),{x:t.x+i,y:t.y+l}}function d(t,e){var n,r,a=null,o=[],s=[],i=0;n={ps:{},psh:{},psi:{}},1<t.end.length&&(a={pmhs:{},pm:{},pmhe:{}});for(var l=0;l<t.end.length;l++)o.push({peh:{},pea:{},pe:{}});if(1<t.end.length){a.pm.x=t.start.x,a.pm.y=t.start.y;for(var c=0;c<t.end.length;c++)a.pm.x+=t.end[c].x,a.pm.y+=t.end[c].y;a.pm.x=a.pm.x/(t.end.length+1),a.pm.y=a.pm.y/(t.end.length+1),a.pmhe.x=a.pm.x,a.pmhe.y=a.pm.y;for(c=0;c<t.end.length;c++)a.pmhe.x+=t.end[c].x,a.pmhe.y+=t.end[c].y;a.pmhe.x=a.pmhe.x/(t.end.length+1),a.pmhe.y=a.pmhe.y/(t.end.length+1),a.pmhs.x=2*a.pm.x-a.pmhe.x,a.pmhs.y=2*a.pm.y-a.pmhe.y,n.psh=O(t.start,a.pm,i);for(c=0;c<t.end.length;c++)o[c].peh=O(t.end[c],a.pm,i)}else t.start==t.end[0]?(i=F(45),r={x:t.start.x,y:t.start.y-250},n.psh=O(t.start,r,-i),o[0].peh=O(t.start,r,i)):(t.pair&&(i=F(30)),n.psh=O(t.start,t.end[0],-i),o[0].peh=O(t.end[0],t.start,i));if(e.coordinates&&e.coordinates.transitions)for(var p=0,u=0;u<e.coordinates.transitions.length;u++){var h=e.coordinates.transitions[u],f=2,d=!1;if(2<h.length&&h[0]==t.start.refid&&h[1]==t.end[0].refid){if(t.tsame&&t.tsame[p].drawn){p++;continue}for(c=1;c<t.end.length;c++){if(h[f]!=t.end[c].refid){d=!0;break}f++}if(!d){if(h.length>f){n.psh.x=h[f],f++,h.length>f&&(n.psh.y=h[f],f++),1<t.end.length&&h.length>f&&(a.pm.x=h[f],f++,h.length>f&&(a.pm.y=h[f],f++,h.length>f&&(a.pmhe.x=h[f],f++,h.length>f&&(a.pmhe.y=h[f],f++,h.length>f&&(a.pmhs.x=h[f],f++,h.length>f&&(a.pmhs.y=h[f],f++))))));for(c=0;c<t.end.length&&h.length>f&&(o[c].peh.x=h[f],f++,h.length>f);c++)o[c].peh.y=h[f],f++;if(h.length>f)for(var y=1;h.length>f;)y%2?s.push({xoff:h[f]}):s[s.length-1].yoff=h[f],y++,f++}t.drawn=!0;break}}}for(var m=0;m<s.length;m++)t.hasOwnProperty("pt")&&t.pt[m]&&s[m].hasOwnProperty("xoff")&&(t.pt[m].xoff=s[m].xoff,s[m].hasOwnProperty("yoff")&&(t.pt[m].yoff=s[m].yoff));n.ps=b(t.start,n.psh),n.psi=v(t.start,n.ps,g);for(c=0;c<t.end.length;c++)o[c].pe=b(t.end[c],o[c].peh),o[c].pea=v(t.end[c],o[c].pe,g);t.p.pse0.x=n.ps.x,t.p.pse0.y=n.ps.y,t.p.psh0.x=n.psh.x+(!H(e.coordinates)&&n.psh.hasOwnProperty("x")?0:i?n.ps.x-n.psi.x:0),t.p.psh0.y=n.psh.y+(!H(e.coordinates)&&n.psh.hasOwnProperty("y")?0:i?n.ps.y-n.psi.y:0),1<t.end.length&&(t.p.pmhs.x=a.pmhs.x,t.p.pmhs.y=a.pmhs.y,t.p.pm.x=a.pm.x,t.p.pm.y=a.pm.y,t.p.pmhe.x=a.pmhe.x,t.p.pmhe.y=a.pmhe.y);for(c=0;c<t.end.length;c++)t.p["peh"+c].x=o[c].peh.x+(!H(e.coordinates)&&o[c].peh.hasOwnProperty("x")?0:i?o[c].pea.x-o[c].pe.x:0),t.p["peh"+c].y=o[c].peh.y+(!H(e.coordinates)&&o[c].peh.hasOwnProperty("y")?0:i?o[c].pea.y-o[c].pe.y:0),t.p["pea"+c].x=o[c].pea.x,t.p["pea"+c].y=o[c].pea.y,t.p["pee"+c].x=o[c].pe.x,t.p["pee"+c].y=o[c].pe.y}function j(t){var e;if(t.pt)if(1<t.end.length)for(var n=0;n<t.pt.length&&n<t.end.length+1;n++)t.pt[n]&&(e=n?a(t.p.pm,t.p.pmhe,t.p["peh"+(n-1)],t.p["pea"+(n-1)]):a(t.p.pse0,t.p.psh0,t.p.pmhs,t.p.pm),t.pt[n].x=e.x,t.pt[n].y=e.y);else e=a(t.p.pse0,t.p.psh0,t.p.peh0,t.p.pea0),t.pt[0].x=e.x,t.pt[0].y=e.y}function C(t,e){if(1<t.end.length){var n={},r={};if(e.draggedpoint==t.start){var a={};a=i(e,t.p.pm,t.p.psh0,t.start,t.p.pm,!0),n=i(t.p.pm,e,t.p.pmhe,t.p.pm,t.start,!0),r=m(t.p.pmhe,t.p.pm,t.p.pmhs,n,t.p.pm,!0,!0),t.p.psh0.x=a.x,t.p.psh0.y=a.y,t.p.pmhs.x=r.x,t.p.pmhs.y=r.y,t.p.pmhe.x=n.x,t.p.pmhe.y=n.y}else if(e.draggedpoint==t.p.pm){a={};a=i(t.start,e,t.p.psh0,t.start,t.p.pm,!0),n=i(e,t.start,t.p.pmhe,t.p.pm,t.start,!0),r=m(t.p.pmhe,e,t.p.pmhs,n,t.p.pm,!0,!0),t.p.psh0.x=a.x,t.p.psh0.y=a.y,t.p.pmhs.x=r.x,t.p.pmhs.y=r.y,t.p.pmhe.x=n.x,t.p.pmhe.y=n.y}else for(var o=0;o<t.end.length;o++)if(e.draggedpoint==t.end[o]){var s;s=i(e,t.p.pm,t.p["peh"+o],t.end[o],t.p.pm,!0),t.p["peh"+o].x=s.x,t.p["peh"+o].y=s.y;break}}else{e.draggedpoint==t.start&&e.draggedpoint==t.end[0]?(a=i(e,e,t.p.psh0,t.start,t.end[0],!0),s=i(e,e,t.p.peh0,t.end[0],t.start,!0)):e.draggedpoint==t.start?(a=i(e,t.end[0],t.p.psh0,t.start,t.end[0],!0),s=i(t.end[0],e,t.p.peh0,t.end[0],t.start,!0)):e.draggedpoint==t.end[0]&&(a=i(t.start,e,t.p.psh0,t.start,t.end[0],!0),s=i(e,t.start,t.p.peh0,t.end[0],t.start,!0)),t.p.psh0.x=a.x,t.p.psh0.y=a.y,t.p.peh0.x=s.x,t.p.peh0.y=s.y}}function P(t){if(1<t.end.length){n=b(t.start,t.p.psh0),t.p.pse0.x=n.x,t.p.pse0.y=n.y;for(var e=0;e<t.end.length;e++)a=b(t.end[e],t.p["peh"+e]),r=v(t.end[e],a,g),t.p["pea"+e].x=r.x,t.p["pea"+e].y=r.y,t.p["pee"+e].x=a.x,t.p["pee"+e].y=a.y}else{var n,r,a;n=b(t.start,t.p.psh0),a=b(t.end[0],t.p.peh0),r=v(t.end[0],a,g),t.p.pse0.x=n.x,t.p.pse0.y=n.y,t.p.pea0.x=r.x,t.p.pea0.y=r.y,t.p.pee0.x=a.x,t.p.pee0.y=a.y}}function I(d,y,e,t){function o(t){M.select(y).select("#trhandle_"+d+"_"+t.id);var e,n,r,a,o,s,i,l,c=M.select(this).attr("id").split("_"),p=null,u=null;switch((e={x:0,y:0}).x=M.event.x,e.y=M.event.y,c[3][1]){case"s":p=t.start,n=10;break;case"e":p=t.end[c[3][3]],n=g+10}switch(p&&(o=n,s=b(r=p,a=e),i=x(r,a),l=x(r,s),o&&(l+=o),u=i<l&&v(r,s,o)),u&&(e=u),c[3][1]){case"m":switch(c[3]){case"pm":var h={draggedpoint:t.p.pm,x:t.p.pm.x,y:t.p.pm.y};t.p.pm.x=e.x,t.p.pm.y=e.y,C(t,h);break;case"pmhs":t.p.pmhe=m(t.p.pmhs,t.p.pm,t.p.pmhe,e,t.p.pm,!0,!1);break;case"pmhe":t.p.pmhs=m(t.p.pmhe,t.p.pm,t.p.pmhs,e,t.p.pm,!0,!1)}case"s":case"e":t.p[c[3]].x=e.x,t.p[c[3]].y=e.y}switch(P(t),j(t),c[3]){case"pm":M.select(y).select("#trhandle_"+d+"_"+t.id+"_pm_m").attr("cx",t.p.pm.x).attr("cy",t.p.pm.y),M.select(y).select("#trhandle_"+d+"_"+t.id+"_pm").attr("cx",t.p.pm.x).attr("cy",t.p.pm.y),M.select(y).select("#trhandle_"+d+"_"+t.id+"_lsh0").attr("x1",t.p.pse0.x).attr("y1",t.p.pse0.y).attr("x2",t.p.psh0.x).attr("y2",t.p.psh0.y),M.select(y).select("#trhandle_"+d+"_"+t.id+"_psh0").attr("cx",t.p.psh0.x).attr("cy",t.p.psh0.y);case"pmhs":case"pmhe":M.select(y).select("#trhandle_"+d+"_"+t.id+"_lmhs").attr("x1",t.p.pm.x).attr("y1",t.p.pm.y).attr("x2",t.p.pmhs.x).attr("y2",t.p.pmhs.y),M.select(y).select("#trhandle_"+d+"_"+t.id+"_pmhs").attr("cx",t.p.pmhs.x).attr("cy",t.p.pmhs.y),M.select(y).select("#trhandle_"+d+"_"+t.id+"_lmhe").attr("x1",t.p.pm.x).attr("y1",t.p.pm.y).attr("x2",t.p.pmhe.x).attr("y2",t.p.pmhe.y),M.select(y).select("#trhandle_"+d+"_"+t.id+"_pmhe").attr("cx",t.p.pmhe.x).attr("cy",t.p.pmhe.y);break;default:M.select(y).select("#trhandle_"+d+"_"+t.id+"_l"+c[3].substring(1)).attr("x1",t.p[c[3].substring(0,2)+"e"+c[3][3]].x).attr("y1",t.p[c[3].substring(0,2)+"e"+c[3][3]].y).attr("x2",t.p[c[3]].x).attr("y2",t.p[c[3]].y),M.select(this).attr("cx",t.p[c[3]].x).attr("cy",t.p[c[3]].y)}if(1<t.end.length?M.select(y).select("#transition_"+d+"_"+t.id).selectAll("path").each(function(t,n){M.select(this).attr("d",function(t){var e="M";return n?(e+=t.p.pm.x+" ",e+=t.p.pm.y+" C",e+=t.p.pmhe.x+" ",e+=t.p.pmhe.y+" ",e+=t.p["peh"+(n-1)].x+" ",e+=t.p["peh"+(n-1)].y+" ",e+=t.p["pea"+(n-1)].x+" ",e+=t.p["pea"+(n-1)].y):(e+=t.p.pse0.x+" ",e+=t.p.pse0.y+" C",e+=t.p.psh0.x+" ",e+=t.p.psh0.y+" ",e+=t.p.pmhs.x+" ",e+=t.p.pmhs.y+" ",e+=t.p.pm.x+" ",e+=t.p.pm.y),e})}):M.select(y).select("#transition_"+d+"_"+t.id).select("path").attr("d",function(t){var e="M";return e+=t.p.pse0.x+" ",e+=t.p.pse0.y+" C",e+=t.p.psh0.x+" ",e+=t.p.psh0.y+" ",e+=t.p.peh0.x+" ",e+=t.p.peh0.y+" ",e+=t.p.pea0.x+" ",e+=t.p.pea0.y}),t.hasOwnProperty("pt"))for(var f=0;f<t.pt.length;f++)M.select(y).select("#trg_"+d+"_"+t.id+"_"+f).attr("transform",function(t){return"translate("+(t.pt[f].x+t.pt[f].xoff)+","+(t.pt[f].y+t.pt[f].yoff)+")"})}function s(t){N(d,y,!H(e.coordinates))}function i(t){for(var e=0;e<t.end.length;e++)k(d,y,t.end[e],"n");k(d,y,t.start,"n"),_(d,y,t)}function l(t){for(var e=0;e<t.end.length;e++)B(d,y,t.end[e]);B(d,y,t.start),w(d,y,t)}var c=M.select(y).select("#handles_"+d);c.empty()&&(c=M.select(y).select("#svgcontent_"+d).append("g").attr("id","handles_"+d)),t.each(function(t){if(M.select(y).select("#trhandle_"+d+"_"+t.id).empty()){var e=c.append("g").datum(t).attr("id",function(t){return"trhandle_"+d+"_"+t.id}).classed("trhandle",!0);if(e.append("line").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_lsh0"}).attr("x1",function(t){return t.p.pse0.x}).attr("y1",function(t){return t.p.pse0.y}).attr("x2",function(t){return t.p.psh0.x}).attr("y2",function(t){return t.p.psh0.y}),e.append("circle").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_psh0"}).attr("r",10).attr("cx",function(t){return t.p.psh0.x}).attr("cy",function(t){return t.p.psh0.y}).call(M.drag().subject(function(t){return t.p[M.select(this).attr("id").split("_")[3]]}).on("drag",o).on("end",s)).on("mouseenter",i).on("mouseleave",l),1<t.end.length)for(var n=["mhs","mhe","m"],r=0;r<n.length;r++)r<n.length-1?e.append("line").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_l"+n[r]}).attr("x1",function(t){return t.p.pm.x}).attr("y1",function(t){return t.p.pm.y}).attr("x2",function(t){return t.p["p"+n[r]].x}).attr("y2",function(t){return t.p["p"+n[r]].y}):e.append("circle").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_p"+n[r]+"_m"}).attr("r",4).attr("cx",function(t){return t.p["p"+n[r]].x}).attr("cy",function(t){return t.p["p"+n[r]].y}),e.append("circle").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_p"+n[r]}).attr("r",10).attr("cx",function(t){return t.p["p"+n[r]].x}).attr("cy",function(t){return t.p["p"+n[r]].y}).call(M.drag().subject(function(t){return t.p[M.select(this).attr("id").split("_")[3]]}).on("drag",o).on("end",s)).on("mouseenter",i).on("mouseleave",l);for(var a=0;a<t.end.length;a++)e.append("line").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_leh"+a}).attr("x1",function(t){return t.p["pee"+a].x}).attr("y1",function(t){return t.p["pee"+a].y}).attr("x2",function(t){return t.p["peh"+a].x}).attr("y2",function(t){return t.p["peh"+a].y}),e.append("circle").attr("id",function(t){return"trhandle_"+d+"_"+t.id+"_peh"+a}).attr("r",10).attr("cx",function(t){return t.p["peh"+a].x}).attr("cy",function(t){return t.p["peh"+a].y}).call(M.drag().subject(function(t){return t.p[M.select(this).attr("id").split("_")[3]]}).on("drag",o).on("end",s)).on("mouseenter",i).on("mouseleave",l)}})}function L(t,e,n,r){n.each(function(t){M.select(e).select("#"+r+t.id).remove()}),M.select(e).select("#handles_"+t).selectAll("*").empty()&&M.select(e).select("#handles_"+t).remove()}function T(t,e,n,r){var a,o,s,i,l,c,p,u,h="",f=2*S;if(a=t.x-n/2-S,o=t.x+n/2+S,s=t.y-r/2-S,i=t.y+r/2+S,(e.x<a||e.x>o)&&(e.y<s||e.y>i))l=e.x<a?a-e.x:e.x-o,c=e.y<s?s-e.y:e.y-i,u=f-(p=f*(Math.atan2(c,l)%(Math.PI/2)/(Math.PI/2))),h+="M",h+=e.x+" "+e.y+" ",h+="L",e.x<a&&e.y<s?(h+=a+p+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+(s+u)+" "):e.x>o&&e.y<s?(h+=o+" "+(s+u)+" ",h+=o+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+s+" ",h+=o-p+" "+s+" "):e.x>o&&e.y>i?(h+=o-p+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+(i-u)+" "):(h+=a+" "+(i-u)+" ",h+=a+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+i+" ",h+=a+p+" "+i+" "),h+=" Z";else if(e.x>=a&&e.x<=o&&e.y>=s&&e.y<=i)h+="M",h+=a+" "+s+" ",h+="L",h+=o+" "+s+" ",h+=o+" "+i+" ",h+=a+" "+i+" ",h+="Z";else{var d,y,m,g;e.x<a||e.x>o?(d=e.y-s,y=i-e.y):(d=e.x-a,y=o-e.x),y<d?m=f/2<y?g=f/2:f-(g=y):g=f/2<d?m=f/2:f-(m=d),h+="M",h+=e.x+" "+e.y+" ",h+="L",e.x<a?(h+=a+" "+(e.y-m)+" ",h+=a+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+(e.y+g)+" "):e.y<s?(h+=e.x+g+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+s+" ",h+=e.x-m+" "+s+" "):e.x>o?(h+=o+" "+(e.y+g)+" ",h+=o+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+(e.y-m)+" "):(h+=e.x-m+" "+i+" ",h+=a+" "+i+" ",h+=a+" "+s+" ",h+=o+" "+s+" ",h+=o+" "+i+" ",h+=e.x+g+" "+i+" "),h+="Z"}return h}function D(t,e,n){return{x:Math.round(e/t)*t,y:Math.round(n/t)*t}}function F(t){return t*Math.PI/180}function H(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}WaveDrom.createFSMBg=function(t,e){var n=M.select("#svgcontent_"+t).attr("viewBox").split(" ");M.select("#graph_"+t).insert("g","*:first-child").attr("id",e).append("rect").attr("x",n[0]).attr("y",n[1]).attr("width",n[2]).attr("height",n[3]).style("fill","#FFF")},WaveDrom.readyFSMToSave=function(t,e){var n,r,a,o;M.select(e).select("#graph_"+t).empty()||(n=t,r=e,a=M.select(r).select("#svgcontent_"+n),o=M.select(r).select("#graph_"+n),a.each(function(t){var e=o.node().getBBox();e.x-=20,e.y-=20,e.width+=40,e.height+=40,M.select(this).attr("width",e.width).attr("height",e.height).attr("viewBox",e.x+" "+e.y+" "+e.width+" "+e.height)}))},WaveDrom.restoreSVGViewBox=function(t,e){M.select(e).select("#graph_"+t).empty()||r(M.select(e).select("#svgcontent_"+t))},WaveDrom.removeAllHandles=function(t,e){M.select(e).select("#handles_"+t).remove()},e.exports=function(t,e,n){!function(l,c,x){function t(t){}function e(t){var e=D(A.grid.widthMin,M.event.x,M.event.y),n={draggedpoint:t,x:t.x,y:t.y};t.x=e.x,t.y=e.y,M.select(this).attr("transform","translate("+t.x+","+t.y+")");for(var r=0;r<t.links.length;r++){var a=t.links[r];for(var o in C(a,n),P(a),j(a),1<a.end.length?M.select(c).select("#transition_"+l+"_"+a.id).selectAll("path").each(function(t,n){M.select(this).attr("d",function(t){var e="M";return n?(e+=a.p.pm.x+" ",e+=a.p.pm.y+" C",e+=a.p.pmhe.x+" ",e+=a.p.pmhe.y+" ",e+=a.p["peh"+(n-1)].x+" ",e+=a.p["peh"+(n-1)].y+" ",e+=a.p["pea"+(n-1)].x+" ",e+=a.p["pea"+(n-1)].y):(e+=a.p.pse0.x+" ",e+=a.p.pse0.y+" C",e+=a.p.psh0.x+" ",e+=a.p.psh0.y+" ",e+=a.p.pmhs.x+" ",e+=a.p.pmhs.y+" ",e+=a.p.pm.x+" ",e+=a.p.pm.y),e})}):M.select(c).select("#transition_"+l+"_"+a.id).select("path").attr("d",function(t){var e="M";return e+=a.p.pse0.x+" ",e+=a.p.pse0.y+" C",e+=a.p.psh0.x+" ",e+=a.p.psh0.y+" ",e+=a.p.peh0.x+" ",e+=a.p.peh0.y+" ",e+=a.p.pea0.x+" ",e+=a.p.pea0.y}),a.p)if("h"==o[2]){var s=M.select(c).select("#trhandle_"+l+"_"+a.id);s.select("#trhandle_"+l+"_"+a.id+"_l"+o.substring(1)).attr("x1","m"==o[1]?a.p.pm.x:a.p[o.substr(0,2)+"e"+o.substr(3,1)].x).attr("y1","m"==o[1]?a.p.pm.y:a.p[o.substr(0,2)+"e"+o.substr(3,1)].y).attr("x2",a.p[o].x).attr("y2",a.p[o].y),s.select("#trhandle_"+l+"_"+a.id+"_"+o).attr("cx",a.p[o].x).attr("cy",a.p[o].y)}if(a.hasOwnProperty("pt"))for(var i=0;i<a.pt.length;i++)M.select(c).select("#trg_"+l+"_"+a.id+"_"+i).attr("transform",function(t){return"translate("+(t.pt[i].x+t.pt[i].xoff)+","+(t.pt[i].y+t.pt[i].yoff)+")"})}}function n(t){N(l,c,!H(x.coordinates))}function r(t){M.select(this).each(function(t){for(var e=0,n=0;n<t.links.length;n++)M.select(c).select("#trhandle_"+l+"_"+t.links[n].id).empty()||e++;if(e)for(var n=0;n<t.links.length;n++)L(l,c,M.select("#transition_"+l+"_"+t.links[n].id),"trhandle_"+l+"_");else{for(var n=0;n<t.links.length;n++)I(l,c,x,M.select("#transition_"+l+"_"+t.links[n].id));a(t)}})}function a(r){M.select(c).select("#state_"+l+"_"+r.id).each(function(t){for(var e=0;e<t.links.length;e++){for(var n=0;n<t.links[e].end.length;n++)t.links[e].end[n]!=r&&k(l,c,t.links[e].end[n],"n");t.links[e].start!=r&&k(l,c,t.links[e].start,"n"),_(l,c,t.links[e],"n")}}),k(l,c,r,"act")}function o(r){M.select(c).select("#state_"+l+"_"+r.id).each(function(t){for(var e=0;e<t.links.length;e++){for(var n=0;n<t.links[e].end.length;n++)t.links[e].end[n]!=r&&B(l,c,t.links[e].end[n]);t.links[e].start!=r&&B(l,c,t.links[e].start),w(l,c,t.links[e])}}),B(l,c,r)}var s=M.select(c).select("#graph_"+l).append("g").attr("id","states_"+l);if(x.states.length<2)d3svg;else{for(var v=0;v<x.states.length;v++){var i=s.append("g").datum(x.states[v]).attr("id",function(t){return"state_"+l+"_"+t.id}).classed("state",!0).each(function(t){t.zerostate?M.select(this).classed("statezero",!0):M.select(this).classed("statereg",!0)}).call(M.drag().subject(function(t){return t}).on("start",t).on("drag",e).on("end",n)).on("click",r).on("mouseenter",a).on("mouseleave",o),p=i.append("ellipse").datum(x.states[v]).attr("cx",0).attr("cy",0),b=i.append("g").classed("stext",!0);b.append("text").datum(x.states[v]).classed("stextname",!0).attr("x",0).attr("y",0).each(function(t){if(t.zerostate){var e=[],n=[];t.links[0].pt[0]?e=t.links[0].pt[0].cond:(n.push({content:"cond"}),e.push(n),(n=[]).push({content:"N/A"}),e.push(n));for(var r=0;r<e.length;r++)for(var a=M.select(this).append("tspan").attr("x",0).attr("dy",function(t){return(r?1:-(e.length-1))+"em"}),o=0;o<e[r].length;o++)a.append("tspan").classed("textbf",e[r][o].bf).classed("textit",e[r][o].it).style("font-size",e[r][o].fs).text(function(t){return e[r][o].content})}else{for(var s,i=t.name,l=0,c=0;c<i.length;c++){var a=M.select(this).append("tspan").attr("x",0);c||(s=a);for(var p=0,u=0;u<i[c].length;u++){var h=a.append("tspan").classed("textbf",i[c][u].bf).classed("textit",i[c][u].it).style("font-size",i[c][u].fs).text(function(t){return i[c][u].content}),f=parseInt(window.getComputedStyle(h.node(),null).getPropertyValue("font-size"),10);p=p<f?f:p}c&&(l-=p),a.attr("dy",function(t){return p+"px"})}if(s.attr("dy",function(t){return l-.25*p+"px"}),t.action)for(var d=t.action,y=(b.append("line"),b.append("text").datum(x.states[v]).classed("stextaction",!0).attr("x",0).attr("y",0)),m=0;m<d.length;m++){for(var a=y.append("tspan").attr("x",0),p=0,g=0;g<d[m].length;g++){var h=a.append("tspan").classed("textbf",d[m][g].bf).classed("textit",d[m][g].it).style("font-size",d[m][g].fs).text(function(t){return d[m][g].content}),f=parseInt(window.getComputedStyle(h.node(),null).getPropertyValue("font-size"),10);p=p<f?f:p}a.attr("dy",function(t){return p+"px"})}}}),b.each(function(t){var e;e=this.getBBox(),t.a=e.width,t.b=e.height/2+10,M.select(this).select("line").attr("x1",function(t){return.6*-e.width}).attr("x2",function(t){return.6*e.width}).attr("y1",function(t){return 0}).attr("y2",function(t){return 0})}),p.attr("rx",function(t){return t.a}).attr("ry",function(t){return t.b}).each(function(t){var e=b.node().getBBox(),n=this.getBBox(),r=(n.height-e.height)/2+(n.y-e.y);b.attr("transform",function(t){return"translate(0,"+r+")"}),t.zerostate&&this.remove()})}var u,h=Math.ceil(Math.sqrt(x.states.length)),f=0,d=0,y=0,m=A.grid.widthMain,g=A.grid.widthMain;s.selectAll("g[id^=state_"+l+"_]").each(function(t){var e={};if(x.coordinates&&x.coordinates.states)for(var n=0;n<x.coordinates.states.length;n++){var r=x.coordinates.states[n];if(1<r.length&&r[0]==t.refid){e.x=r[1],2<r.length&&(e.y=r[2]);break}}u=D(A.grid.widthMain,y?y+2*A.grid.widthMain+t.a:m,g),t.x=u.x,t.y=u.y,e.hasOwnProperty("x")&&(t.x=e.x,e.hasOwnProperty("y")&&(t.y=e.y)),M.select(this).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),y=t.x+t.a,d<t.y+t.a&&(d=t.y+t.a),++f%h||(g=d+A.grid.widthMain,f=y=0)})}}(t,e,n),function(r,n,o){function t(t){M.select(n).select("#trhandle_"+r+"_"+t.id).empty()?(I(r,n,o,M.select(this)),_(r,n,t)):L(r,n,M.select(this),"trhandle_"+r+"_")}function e(t){k(r,n,t.start,"n");for(var e=0;e<t.end.length;e++)k(r,n,t.end[e],"n");_(r,n,t)}function a(t){B(r,n,t.start);for(var e=0;e<t.end.length;e++)B(r,n,t.end[e]);w(r,n,t)}function s(t){var e=M.select(this).attr("id").split("_")[3];t.pt[e].xoff=M.event.x-t.pt[e].x,t.pt[e].yoff=M.event.y-t.pt[e].y,M.select(n).select("#trg_"+r+"_"+t.id+"_"+e).attr("transform",function(t){return"translate("+(t.pt[e].x+t.pt[e].xoff)+","+(t.pt[e].y+t.pt[e].yoff)+")"})}function i(t){N(r,n,!H(o.coordinates))}function l(t){}function c(t){}for(var p=M.select(n).select("#graph_"+r).insert("g","*:first-child").attr("id","transitions_"+r),u=0;u<o.transitions.length;u++){var h=p.append("g").datum(o.transitions[u]).attr("id",function(t){return"transition_"+r+"_"+t.id}).classed("transition",!0).on("click",t).on("mouseenter",e).on("mouseleave",a).each(function(t){t.start.zerostate?M.select(this).classed("transitionzero",!0):M.select(this).classed("transitionreg",!0)});if(1<o.transitions[u].end.length){d(o.transitions[u],o),j(o.transitions[u]),h.append("path").attr("d",function(t){var e="M";return e+=t.p.pse0.x+" ",e+=t.p.pse0.y+" C",e+=t.p.psh0.x+" ",e+=t.p.psh0.y+" ",e+=t.p.pmhs.x+" ",e+=t.p.pmhs.y+" ",e+=t.p.pm.x+" ",e+=t.p.pm.y});for(var f=0;f<o.transitions[u].end.length;f++)h.append("path").attr("d",function(t){var e="M",n=o.transitions[u];return e+=n.p.pm.x+" ",e+=n.p.pm.y+" C",e+=n.p.pmhe.x+" ",e+=n.p.pmhe.y+" ",e+=n.p["peh"+f].x+" ",e+=n.p["peh"+f].y+" ",e+=n.p["pea"+f].x+" ",e+=n.p["pea"+f].y})}else h.append("path").each(function(t){d(t,o),j(t)}).attr("d",function(t){var e="M";return e+=t.p.pse0.x+" ",e+=t.p.pse0.y+" C",e+=t.p.psh0.x+" ",e+=t.p.psh0.y+" ",e+=t.p.peh0.x+" ",e+=t.p.peh0.y+" ",e+=t.p.pea0.x+" ",e+=t.p.pea0.y});h.each(function(t){if(t.pt&&!t.start.zerostate)for(var p=0;p<t.pt.length;p++)if(t.pt[p]&&(t.pt[p].cond||t.pt[p].action)){var e=M.select(this).append("g").attr("id",function(t){return"trg_"+r+"_"+t.id+"_"+p}).attr("transform",function(t){return"translate("+(t.pt[p].x+t.pt[p].xoff)+", "+(t.pt[p].y+t.pt[p].yoff)+")"}).call(M.drag().subject(function(t){var e=M.select(this).attr("id").split("_")[3];return{x:t.pt[e].x+t.pt[e].xoff,y:t.pt[e].y+t.pt[e].yoff}}).on("drag",s).on("end",i)).on("mouseenter",l).on("mouseleave",c),a=e.append("rect"),n=e.append("g").classed("trtext",!0);t.pt[p].cond&&n.append("text").classed("trtextcond",!0).attr("x",0).attr("y",0).each(function(t){for(var e,n=t.pt[p].cond,r=0,a=0;a<n.length;a++){var o=M.select(this).append("tspan").attr("x",0);a||(e=o);for(var s=0,i=0;i<n[a].length;i++){var l=o.append("tspan").classed("textbf",n[a][i].bf).classed("textit",n[a][i].it).style("font-size",n[a][i].fs).text(function(t){return n[a][i].content}),c=parseInt(window.getComputedStyle(l.node(),null).getPropertyValue("font-size"),10);s=s<c?c:s}a&&(r-=s),o.attr("dy",function(t){return s+"px"})}e.attr("dy",function(t){return r-.25*s+"px"})}),t.pt[p].action&&(n.append("line"),n.append("text").datum(o.transitions[u]).classed("trtextaction",!0).attr("x",0).attr("y",0).each(function(t){for(var e=t.pt[p].action,n=0;n<e.length;n++){for(var r=M.select(this).append("tspan").attr("x",0),a=0,o=0;o<e[n].length;o++){var s=r.append("tspan").classed("textbf",e[n][o].bf).classed("textit",e[n][o].it).style("font-size",e[n][o].fs).text(function(t){return e[n][o].content}),i=parseInt(window.getComputedStyle(s.node(),null).getPropertyValue("font-size"),10);a=a<i?i:a}r.attr("dy",function(t){return a+"px"})}})),n.each(function(t){var e,n=0,r=M.select(this).selectAll("text");e=this.getBBox(),1==r.size()&&(n=e.height/2,r.classed("trtextcond")?r.attr("y",n):r.classed("trtextaction")&&(n=-n,r.attr("y",n))),M.select(this).selectAll("line").attr("x1",function(t){return.6*-e.width}).attr("x2",function(t){return.6*e.width}).attr("y1",function(t){return n}).attr("y2",function(t){return n}),e=this.getBBox(),a.attr("x",function(t){return e.x}).attr("y",function(t){return e.y}).attr("width",function(t){return e.width}).attr("height",function(t){return e.height})})}})}}(t,e,n),function(n,r,a){function t(t){var e;t.pc.x=M.event.x,t.pc.y=M.event.y,t.pp.x+=M.event.dx,t.pp.y+=M.event.dy,M.select(r).select("#ntg_"+n+"_"+t.id).attr("transform","translate("+t.pc.x+","+t.pc.y+")"),e=T(t.pc,t.pp,t.width,t.height),M.select(r).select("#note_"+n+"_"+t.id).selectAll("path").attr("d",e),M.select(r).select("#nthandle_"+n+"_"+t.id).selectAll("circle").attr("cx",t.pp.x).attr("cy",t.pp.y)}function e(t){var e;t.pc.x=M.event.x,t.pc.y=M.event.y,M.select(r).select("#ntg_"+n+"_"+t.id).attr("transform","translate("+t.pc.x+","+t.pc.y+")"),e=T(t.pc,t.pp,t.width,t.height),M.select(r).select("#note_"+n+"_"+t.id).selectAll("path").attr("d",e)}function o(t){N(n,r,!H(a.coordinates))}function s(t){M.select(r).select("#nthandle_"+n+"_"+t.id).empty()?(function(n,r,e,t){function a(t){t.pp.x=M.event.x,t.pp.y=M.event.y,M.select(r).select("#note_"+n+"_"+t.id).select("path").attr("d",T(t.pc,t.pp,t.width,t.height)),M.select(this.parentNode).selectAll("circle").attr("cx",t.pp.x).attr("cy",t.pp.y)}function o(t){N(n,r,!H(e.coordinates))}function s(t){E(n,r,t,"act")}function i(t){z(n,r,t,"act")}var l=M.select(r).select("#handles_"+n);l.empty()&&(l=M.select(r).select("#svgcontent_"+n).append("g").attr("id","handles_"+n)),t.each(function(t){if(M.select(r).select("#nthandle_"+n+"_"+t.id).empty()){var e=l.append("g").datum(t).attr("id",function(t){return"nthandle_"+n+"_"+t.id}).classed("nthandle",!0);e.append("circle").attr("id",function(t){return"nthandle_"+n+"_"+t.id+"_pp_m"}).attr("r",4).attr("cx",function(t){return t.pp.x}).attr("cy",function(t){return t.pp.y}),e.append("circle").attr("id",function(t){return"nthandle_"+n+"_"+t.id+"_pp"}).attr("r",10).attr("cx",function(t){return t.pp.x}).attr("cy",function(t){return t.pp.y}).call(M.drag().subject(function(t){return t[M.select(this).attr("id").split("_")[3]]}).on("drag",a).on("end",o)).on("mouseenter",s).on("mouseleave",i)}})}(n,r,a,M.select(this)),M.select(this).classed("noteact")&&M.select(r).select("#nthandle_"+n+"_"+t.id).classed("nthandleact",!0)):L(n,r,M.select(this),"nthandle_"+n+"_")}function i(t){E(n,r,t,"act"),M.select(this).insert("path","path + *").attr("d",T(t.pc,t.pp,t.width,t.height))}function l(t){z(n,r,t,"act"),M.select(this).select("path + path").remove()}function c(t){z(n,r,t,"act"),E(n,r,t,"actb")}function p(t){M.select(this).classed("noteact")?z(n,r,t,"act"):E(n,r,t,"act"),z(n,r,t,"actb")}for(var u=M.select(r).select("#graph_"+n).append("g").attr("id","notes_"+n),h=0;h<a.notes.length;h++){var f=u.append("g").datum(a.notes[h]).attr("id",function(t){return"note_"+n+"_"+t.id}).classed("note",!0).on("click",s).on("mouseenter",i).on("mouseleave",l).call(M.drag().subject(function(t){return{x:t.pc.x,y:t.pc.y}}).on("drag",t).on("end",o)),d=(f.append("path"),f.append("g").attr("id",function(t){return"ntg_"+n+"_"+t.id}).call(M.drag().subject(function(t){return{x:t.pc.x,y:t.pc.y}}).on("drag",e).on("end",o)).on("mouseenter",c).on("mouseleave",p)),y=d.append("g"),m=(y.append("rect"),y.append("g").attr("transform","translate("+S+","+S+")"));m.append("text").attr("x",0).attr("y",0).each(function(t){M.select(this).append("tspan").attr("x",0).attr("dy","1em").text(function(t){return t.refid});for(var e=t.text,n=0;n<e.length;n++){for(var r=M.select(this).append("tspan").attr("x",0),a=0,o=0;o<e[n].length;o++){var s=r.append("tspan").classed("textbf",e[n][o].bf).classed("textit",e[n][o].it).style("font-size",e[n][o].fs).text(e[n][o].content),i=parseInt(window.getComputedStyle(s.node(),null).getPropertyValue("font-size"),10);a=a<i?i:a}r.attr("dy",a+"px")}}),y.each(function(t){var e,n,r,a,o;e=this.getBBox(),t.width=e.width,t.height=e.height,n=-1*(e.width/2+S),r=-1*(e.height/2+S),a=t.width+2*S,o=t.height+2*S,M.select(this).attr("transform","translate("+n+","+r+")"),M.select(this).select("rect").attr("width",a).attr("height",o)})}var g,x=Math.ceil(Math.sqrt(a.notes.length)),v=0,b=0,_=0,w=1.5*A.grid.widthMain,k=A.grid.widthMain;u.selectAll("g[id^=note_"+n+"_]").each(function(t){var e={pc:{},pp:{}};if(a.coordinates&&a.coordinates.notes)for(var n=0;n<a.coordinates.notes.length;n++){var r=a.coordinates.notes[n];if(1<r.length&&r[0]==t.refid){e.pc.x=r[1],2<r.length&&(e.pc.y=r[2],3<r.length&&(e.pp.x=r[3],4<r.length&&(e.pp.y=r[4])));break}}g=D(A.grid.widthMain,_?_+2*A.grid.widthMain+t.width/2:w,k),t.pc.x=g.x,t.pc.y=g.y,t.pp.x=g.x,t.pp.y=g.y,e.pc.hasOwnProperty("x")&&(t.pc.x=e.pc.x,e.pc.hasOwnProperty("y")&&(t.pc.y=e.pc.y)),e.pp.hasOwnProperty("x")&&(t.pp.x=e.pp.x,e.pp.hasOwnProperty("y")&&(t.pp.y=e.pp.y)),M.select(this).select("path").attr("d",T(t.pc,t.pp,t.width,t.height)),M.select(this).select("g").attr("transform",function(t){return"translate("+t.pc.x+","+t.pc.y+")"}),_=t.pc.x+t.width/2,b<t.pc.y+t.width/2&&(b=t.pc.y+t.width/2),++v%x||(k=b+A.grid.widthMain,v=_=0)})}(t,e,n),r(M.select(e).select("#svgcontent_"+t))}},{"./fsm-gen-grid":7,"./fsm-json-update":10,"./fsm-resize-svg":12,"d3-drag":47,"d3-selection":48}],12:[function(t,e,n){"use strict";var a=t("d3-selection"),o=t("./fsm-gen-grid");function r(t){var e,n=t.node().parentNode,r=t.datum();r&&(r.vb.height=n.offsetHeight-1,r.vb.width=n.offsetWidth-1,e=n,a.select(e).selectAll("svg").attr("width",function(t){return t.vb.width}).attr("height",function(t){return t.vb.height}).attr("viewBox",function(t){return t.vb.x+" "+t.vb.y+" "+t.vb.width+" "+t.vb.height}).each(function(t){/^svggrid_/.test(a.select(this).attr("id"))&&o.create(a.select(this))}))}window.addEventListener("resize",function(){a.selectAll("[id^=WaveDrom_Display_]").select("svg").call(r)}),e.exports=r},{"./fsm-gen-grid":7,"d3-selection":48}],13:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,a,o=[];if(4===t.length){for(a=0;a<n;a+=1){for(o.push(t[0]),r=0;r<e;r+=1)o.push(t[1]);for(o.push(t[2]),r=0;r<e;r+=1)o.push(t[3])}return o}for(1===t.length&&t.push(t[0]),o.push(t[0]),r=0;r<n*(2*(e+1))-1;r+=1)o.push(t[1]);return o}},{}],14:[function(t,e,n){"use strict";var a=t("./gen-brick");e.exports=function(t,e,n){var r;switch(r=[],t){case"p":r=a(["pclk","111","nclk","000"],e,n);break;case"n":r=a(["nclk","000","pclk","111"],e,n);break;case"P":r=a(["Pclk","111","nclk","000"],e,n);break;case"N":r=a(["Nclk","000","pclk","111"],e,n);break;case"l":case"L":case"0":r=a(["000"],e,n);break;case"h":case"H":case"1":r=a(["111"],e,n);break;case"=":case"2":r=a(["vvv-2"],e,n);break;case"3":r=a(["vvv-3"],e,n);break;case"4":r=a(["vvv-4"],e,n);break;case"5":r=a(["vvv-5"],e,n);break;case"d":r=a(["ddd"],e,n);break;case"u":r=a(["uuu"],e,n);break;case"z":r=a(["zzz"],e,n);break;default:r=a(["xxx"],e,n)}return r}},{"./gen-brick":13}],15:[function(t,e,n){"use strict";var g=t("./gen-brick");e.exports=function(t,e,n){var r,a,o,s,i,l,c,p,u,h,f,d,y,m;return r={p:"pclk",n:"nclk",P:"Pclk",N:"Nclk",h:"pclk",l:"nclk",H:"Pclk",L:"Nclk"},a={0:"0",1:"1",x:"x",d:"d",u:"u",z:"z","=":"v",2:"v",3:"v",4:"v",5:"v"},o={0:"",1:"",x:"",d:"",u:"",z:"","=":"-2",2:"-2",3:"-3",4:"-4",5:"-5"},s={p:"0",n:"1",P:"0",N:"1",h:"1",l:"0",H:"1",L:"0",0:"0",1:"1",x:"x",d:"d",u:"u",z:"z","=":"v",2:"v",3:"v",4:"v",5:"v"},i={p:"",n:"",P:"",N:"",h:"",l:"",H:"",L:"",0:"",1:"",x:"",d:"",u:"",z:"","=":"-2",2:"-2",3:"-3",4:"-4",5:"-5"},l={p:"nclk",n:"pclk",P:"nclk",N:"pclk"},c={p:"000",n:"111",P:"000",N:"111"},p={hp:"111",Hp:"111",ln:"000",Ln:"000",nh:"111",Nh:"111",pl:"000",Pl:"000"},h={p:"111",n:"000",P:"111",N:"000",h:"111",l:"000",H:"111",L:"000",0:"000",1:"111",x:"xxx",d:"ddd",u:"uuu",z:"zzz","=":"vvv-2",2:"vvv-2",3:"vvv-3",4:"vvv-4",5:"vvv-5"}[(u=t.split(""))[1]],void 0===(f=r[u[1]])?void 0===(d=a[u[1]])?g(["xxx"],e,n):(y=s[u[0]],g(void 0===y?["xxx"]:[y+"m"+d+i[u[0]]+o[u[1]],h],e,n)):(void 0!==(m=p[t])&&(f=m),d=l[u[1]],g(void 0===d?[f,h]:[f,h,d,c[u[1]]],e,n))}},{"./gen-brick":13}],16:[function(t,e,n){"use strict";var r=t("./process-all"),a=t("./eva"),o=t("./render-wave-form"),s=t("./editor-refresh");e.exports={processAll:r,eva:a,renderWaveForm:o,editorRefresh:s}},{"./editor-refresh":3,"./eva":4,"./process-all":28,"./render-wave-form":36}],17:[function(t,e,n){"use strict";var a=t("./create-element"),o=t("./w3");e.exports=function(t,e){for(var n,r;e.childNodes.length;)e.removeChild(e.childNodes[0]);r=["svg",{id:"svgcontent_"+t,xmlns:o.svg,"xmlns:xlink":o.xlink,overflow:"hidden"},["style",".pinname {font-size:12px; font-style:normal; font-variant:normal; font-weight:500; font-stretch:normal; text-align:center; text-anchor:end; font-family:Helvetica} .wirename {font-size:12px; font-style:normal; font-variant:normal; font-weight:500; font-stretch:normal; text-align:center; text-anchor:start; font-family:Helvetica} .wirename:hover {fill:blue} .gate {color:#000; fill:#ffc; fill-opacity: 1;stroke:#000; stroke-width:1; stroke-opacity:1} .gate:hover {fill:red !important; } .wire {fill:none; stroke:#000; stroke-width:1; stroke-opacity:1} .grid {fill:#fff; fill-opacity:1; stroke:none}"]],n=a(r),e.insertBefore(n,null)}},{"./create-element":2,"./w3":38}],18:[function(t,e,n){"use strict";var i=t("./create-element"),l=t("./w3"),c=t("./wave-skin");e.exports=function(t,e,n,r){for(var a,o,s;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(o in c)break;s=c.default||c[o],n&&n.config&&n.config.skin&&c[n.config.skin]&&(s=c[n.config.skin]),0===t?(r.xs=Number(s[3][1][2][1].width),r.ys=Number(s[3][1][2][1].height),r.xlabel=Number(s[3][1][2][1].x),r.ym=Number(s[3][1][2][1].y)):s=["svg",{id:"svg",xmlns:l.svg,"xmlns:xlink":l.xlink,height:"0"},["g",{id:"waves"},["g",{id:"lanes"}],["g",{id:"groups"}]]],s[s.length-1][1].id="waves_"+t,s[s.length-1][2][1].id="lanes_"+t,s[s.length-1][3][1].id="groups_"+t,s[1].id="svgcontent_"+t,s[1].height=0,a=i(s),e.insertBefore(a,null)}},{"./create-element":2,"./w3":38,"./wave-skin":40}],19:[function(t,e,n){"use strict";var o={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},s={enctype:"encoding",onscroll:"DOMMouseScroll"},i=function(t){for(var e,n={};t.length;)n["on"+(e=t.shift()).toLowerCase()]=e;return n}("blur,change,click,dblclick,error,focus,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,resize,scroll,select,submit,unload".split(","));function l(t,e,n){"string"==typeof n&&(n=new Function("event",n)),"function"==typeof n&&(t[e]=n)}e.exports=function(t,e){if(e.name&&document.attachEvent){var n=document.createElement("<"+t.tagName+" name='"+e.name+"'>");t.tagName===n.tagName&&(t=n)}for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];r&&null!=a&&("style"===(r=o[r.toLowerCase()]||r)?void 0!==t.style.cssText?t.style.cssText=a:t.style=a:i[r]?(l(t,r,a),s[r]&&l(t,s[r],a)):"string"==typeof a||"number"==typeof a||"boolean"==typeof a?(t.setAttribute(r,a),s[r]&&t.setAttribute(s[r],a)):(t[r]=a,s[r]&&(t[s[r]]=a)))}return t}},{}],20:[function(t,e,n){"use strict";e.exports=function(t,e){e&&(t.tagName&&"style"===t.tagName.toLowerCase()&&document.createStyleSheet?t.cssText=e:!1!==t.canHaveChildren&&t.appendChild(e))}},{}],21:[function(t,e,n){"use strict";var r=t("./jsonml-trim-whitespace");e.exports=function(t){var e=document.createElement("div");if(e.innerHTML=t,r(e),1===e.childNodes.length)return e.firstChild;for(var n=document.createDocumentFragment?document.createDocumentFragment():document.createElement("");e.firstChild;)n.appendChild(e.firstChild);return n}},{"./jsonml-trim-whitespace":23}],22:[function(t,e,n){"use strict";var i,l,c=t("./jsonml-hydrate"),p=t("./w3"),u=t("./jsonml-append-child"),a=t("./jsonml-add-attributes"),h=t("./jsonml-trim-whitespace");function f(t,e,n){return document.createTextNode("["+t+"-"+n+"]")}i=function(t,e,n){for(var r=1;r<e.length;r++)e[r]instanceof Array||"string"==typeof e[r]?u(t,l(e[r],n)):e[r]&&e[r].value?u(t,c(e[r].value)):"object"==typeof e[r]&&null!==e[r]&&1===t.nodeType&&(t=a(t,e[r]));return t},l=function(e,n){var t,r;try{if(!e)return null;if("string"==typeof e)return document.createTextNode(e);if(e&&e.value)return c(e.value);if(!((r=e)instanceof Array&&"string"==typeof r[0]))throw new SyntaxError("invalid JsonML");var a=e[0];if(!a){for(var o=document.createDocumentFragment?document.createDocumentFragment():document.createElement(""),s=2;s<e.length;s++)u(o,l(e[s],n));return h(o),1===o.childNodes.length?o.firstChild:o}return"style"===a.toLowerCase()&&document.createStyleSheet?(i(document.createStyleSheet(),e,n),null):(t=i(document.createElementNS(p.svg,a),e,n),h(t),t)}catch(t){try{return f(t,e,n)}catch(t){return document.createTextNode("["+t+"]")}}},e.exports=l},{"./jsonml-add-attributes":19,"./jsonml-append-child":20,"./jsonml-hydrate":21,"./jsonml-trim-whitespace":23,"./w3":38}],23:[function(t,e,n){"use strict";function r(t){return t&&3===t.nodeType&&(!t.nodeValue||!/\S/.exec(t.nodeValue))}e.exports=function(t){if(t){for(;r(t.firstChild);)t.removeChild(t.firstChild);for(;r(t.lastChild);)t.removeChild(t.lastChild)}}},{}],24:[function(t,e,n){"use strict";e.exports={xs:20,ys:20,xg:120,yh0:0,yh1:0,yf0:0,yf1:0,y0:5,yo:30,tgo:-10,ym:15,xlabel:6,xmax:1,scale:1,head:{},foot:{}}},{}],25:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r;e.hscale=1,e.hscale0&&(e.hscale=e.hscale0),t&&t.config&&t.config.hscale&&0<(n=Math.round(0<(r=t.config.hscale)?Math.round(r):1))&&(100<n&&(n=100),e.hscale=n),e.yh0=0,e.yh1=0,e.head=t.head,e.xmin_cfg=0,e.xmax_cfg=1e12,t&&t.config&&t.config.hbounds&&2==t.config.hbounds.length&&(t.config.hbounds[0]=Math.floor(t.config.hbounds[0]),t.config.hbounds[1]=Math.ceil(t.config.hbounds[1]),t.config.hbounds[0]<t.config.hbounds[1]&&(e.xmin_cfg=2*Math.floor(t.config.hbounds[0]),e.xmax_cfg=2*Math.floor(t.config.hbounds[1]))),t&&t.head&&((t.head.tick||0===t.head.tick||t.head.tock||0===t.head.tock)&&(e.yh0=20),(t.head.tick||0===t.head.tick)&&(t.head.tick=t.head.tick+e.xmin_cfg/2),(t.head.tock||0===t.head.tock)&&(t.head.tock=t.head.tock+e.xmin_cfg/2),t.head.text&&(e.yh1=46,e.head.text=t.head.text)),e.yf0=0,e.yf1=0,e.foot=t.foot,t&&t.foot&&((t.foot.tick||0===t.foot.tick||t.foot.tock||0===t.foot.tock)&&(e.yf0=20),(t.foot.tick||0===t.foot.tick)&&(t.foot.tick=t.foot.tick+e.xmin_cfg/2),(t.foot.tock||0===t.foot.tock)&&(t.foot.tock=t.foot.tock+e.xmin_cfg/2),t.foot.text&&(e.yf1=46,e.foot.text=t.foot.text))}},{}],26:[function(t,e,n){"use strict";var h=t("./gen-first-wave-brick"),f=t("./gen-wave-brick"),d=t("./find-lane-markers");e.exports=function(t,e,n){var r,a,o,s,i,l,c=[],p=[],u=[];for(o=(c=t.split("")).shift(),i=!1,r=1;"."===c[0]||"|"===c[0];)c.shift(),r+=1;for(p=p.concat(h(o,e,r));c.length;){for(a=o,"<"===(o=c.shift())&&(i=!0,o=c.shift()),">"===o&&(i=!1,o=c.shift()),r=1;"."===c[0]||"|"===c[0];)c.shift(),r+=1;p=i?p.concat(f(a+o,0,r-n.period)):p.concat(f(a+o,e,r))}for(s=0;s<n.phase;s+=1)u.push(p.shift());return 0<u.length?(l=d(u).length,1==d([u[u.length-1]]).length&&1==d([p[0]]).length&&(l-=1)):l=0,[p,l]}},{"./find-lane-markers":5,"./gen-first-wave-brick":14,"./gen-wave-brick":15}],27:[function(t,e,n){"use strict";var u=t("./parse-wave-lane");e.exports=function(t,e){var n,r,a,o,s,i,l,c=[],p=[];for(n in t)r=t[n],e.period=r.period?r.period:1,e.phase=(r.phase?2*r.phase:0)+e.xmin_cfg,c.push([]),p[0]=r.name||" ",p[1]=(r.phase||0)+e.xmin_cfg/2,r.wave?(a=(o=u(r.wave,e.period*e.hscale-1,e))[0],s=o[1]):a=null,c[c.length-1][0]=p.slice(0),c[c.length-1][1]=a,c[c.length-1][2]=(i=s,(l=void 0)===(l=r.data)?null:("string"==typeof l&&(l=l.split(" ")),l=l.slice(i)));return c}},{"./parse-wave-lane":26}],28:[function(t,e,n){"use strict";var a=t("./eva"),o=t("./append-save-as-dialog"),s=t("./render-wave-form");e.exports=function(){var t,e,n,r;for(n=0,t=document.querySelectorAll("*"),e=0;e<t.length;e++)t.item(e).type&&"WaveDrom"===t.item(e).type&&(t.item(e).setAttribute("id","InputJSON_"+n),(r=document.createElement("div")).id="WaveDrom_Display_"+n,t.item(e).parentNode.insertBefore(r,t.item(e)),n+=1);for(e=0;e<n;e+=1)s(e,a("InputJSON_"+e),"WaveDrom_Display_"),o(e,"WaveDrom_Display_");document.head.innerHTML+='<style type="text/css">div.wavedromMenu{position:fixed;border:solid 1pt#CCCCCC;background-color:white;box-shadow:0px 10px 20px #808080;cursor:default;margin:0px;padding:0px;}div.wavedromMenu>ul{margin:0px;padding:0px;}div.wavedromMenu>ul>li{padding:2px 10px;list-style:none;}div.wavedromMenu>ul>li:hover{background-color:#b5d5ff;}</style>'}},{"./append-save-as-dialog":1,"./eva":4,"./render-wave-form":36}],29:[function(t,e,n){"use strict";e.exports=function t(e,n){var r,a,o={},s={x:10};for("string"!=typeof e[0]&&"number"!=typeof e[0]||(a=e[0],s.x=25),n.x+=s.x,r=0;r<e.length;r++)"object"==typeof e[r]&&("[object Array]"===Object.prototype.toString.call(e[r])?(o.y=n.y,(n=t(e[r],n)).groups.push({x:n.xx,y:o.y,height:n.y-o.y,name:n.name})):(n.lanes.push(e[r]),n.width.push(n.x),n.y+=1));return n.xx=n.x,n.x-=s.x,n.name=a,n}},{}],30:[function(t,e,n){"use strict";var M=t("tspan"),A=t("./create-element"),N=t("./w3");e.exports=function(t,e,n,r,a){var o,s,i,l,c,p,u,h,f,d,y,m,g,x,v,b,_=[],w={words:[],from:0,shape:"",to:0,label:""},k={};if(e){for(s in e)if(a.period=e[s].period?e[s].period:1,a.phase=(e[s].phase?2*e[s].phase:0)+a.xmin_cfg,l=e[s].node)for(_=l.split(""),c=0;_.length;)"."!==(p=_.shift())&&(k[p]={x:a.xs*(2*c*a.period*a.hscale-a.phase)+a.xlabel,y:s*a.yo+a.y0+.5*a.ys}),c+=1;if((o=document.createElementNS(N.svg,"g")).id="wavearcs_"+n,t.insertBefore(o,null),r.edge)for(s in r.edge)if(w.words=r.edge[s].split(" "),w.label=r.edge[s].substring(w.words[0].length),w.label=w.label.substring(1),w.from=w.words[0].substr(0,1),w.to=w.words[0].substr(-1,1),w.shape=w.words[0].slice(1,-1),f=k[w.from],d=k[w.to],f&&d&&((v=document.createElementNS(N.svg,"path")).id="gmark_"+w.from+"_"+w.to,v.setAttribute("d","M "+f.x+","+f.y+" "+d.x+","+d.y),v.setAttribute("style","fill:none;stroke:#00F;stroke-width:1"),o.insertBefore(v,null)),f&&d){switch(w.label&&((u=M.parse(w.label)).unshift("text",{style:"font-size:10px;","text-anchor":"middle","xml:space":"preserve"}),u=A(u),h=A(["rect",{height:9,style:"fill:#FFF;"}]),o.insertBefore(h,null),o.insertBefore(u,null),b=u.getBBox().width,h.setAttribute("width",b)),y=d.x-f.x,m=d.y-f.y,g=(f.x+d.x)/2,x=(f.y+d.y)/2,w.shape){case"-":break;case"~":v.setAttribute("d","M "+f.x+","+f.y+" c "+.7*y+", 0 "+.3*y+", "+m+" "+y+", "+m);break;case"-~":v.setAttribute("d","M "+f.x+","+f.y+" c "+.7*y+", 0 "+y+", "+m+" "+y+", "+m),w.label&&(g=f.x+.75*(d.x-f.x));break;case"~-":v.setAttribute("d","M "+f.x+","+f.y+" c 0, 0 "+.3*y+", "+m+" "+y+", "+m),w.label&&(g=f.x+.25*(d.x-f.x));break;case"-|":v.setAttribute("d","m "+f.x+","+f.y+" "+y+",0 0,"+m),w.label&&(g=d.x);break;case"|-":v.setAttribute("d","m "+f.x+","+f.y+" 0,"+m+" "+y+",0"),w.label&&(g=f.x);break;case"-|-":v.setAttribute("d","m "+f.x+","+f.y+" "+y/2+",0 0,"+m+" "+y/2+",0");break;case"->":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none");break;case"~>":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","M "+f.x+","+f.y+" c "+.7*y+", 0 "+.3*y+", "+m+" "+y+", "+m);break;case"-~>":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","M "+f.x+","+f.y+" c "+.7*y+", 0 "+y+", "+m+" "+y+", "+m),w.label&&(g=f.x+.75*(d.x-f.x));break;case"~->":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","M "+f.x+","+f.y+" c 0, 0 "+.3*y+", "+m+" "+y+", "+m),w.label&&(g=f.x+.25*(d.x-f.x));break;case"-|>":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","m "+f.x+","+f.y+" "+y+",0 0,"+m),w.label&&(g=d.x);break;case"|->":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","m "+f.x+","+f.y+" 0,"+m+" "+y+",0"),w.label&&(g=f.x);break;case"-|->":v.setAttribute("style","marker-end:url(#arrowhead);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","m "+f.x+","+f.y+" "+y/2+",0 0,"+m+" "+y/2+",0");break;case"<->":v.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none");break;case"<~>":v.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","M "+f.x+","+f.y+" c "+.7*y+", 0 "+.3*y+", "+m+" "+y+", "+m);break;case"<-~>":v.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","M "+f.x+","+f.y+" c "+.7*y+", 0 "+y+", "+m+" "+y+", "+m),w.label&&(g=f.x+.75*(d.x-f.x));break;case"<-|>":v.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","m "+f.x+","+f.y+" "+y+",0 0,"+m),w.label&&(g=d.x);break;case"<-|->":v.setAttribute("style","marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"),v.setAttribute("d","m "+f.x+","+f.y+" "+y/2+",0 0,"+m+" "+y/2+",0");break;default:v.setAttribute("style","fill:none;stroke:#F00;stroke-width:1")}w.label&&(u.setAttribute("x",g),u.setAttribute("y",x+3),h.setAttribute("x",g-b/2),h.setAttribute("y",x-5))}for(i in k)i===i.toLowerCase()&&0<k[i].x&&(h=A(["rect",{y:k[i].y-4,height:8,style:"fill:#FFF;"}]),u=A(["text",{style:"font-size:8px;",x:k[i].x,y:k[i].y+2,"text-anchor":"middle"},i+""]),o.insertBefore(h,null),o.insertBefore(u,null),b=u.getBBox().width+2,h.setAttribute("x",k[i].x-b/2),h.setAttribute("width",b))}}},{"./create-element":2,"./w3":38,tspan:49}],31:[function(t,e,n){"use strict";var d=t("./create-element");function y(t,e){var n,r,a;for(e.xmax=Math.max(e.xmax,e.x),n=e.y,a=t.length,r=1;r<a;r++)"[object Array]"===Object.prototype.toString.call(t[r])?e=y(t[r],{x:e.x+1,y:e.y,xmax:e.xmax}):(t[r]={name:t[r],x:e.x+1,y:e.y},e.y+=2);return t[0]={name:t[0],x:e.x,y:Math.round((n+(e.y-2))/2)},e.x--,e}function m(t,e){var n,r,a,o,s,i=["g"],l=[];if("[object Array]"===Object.prototype.toString.call(t)){for(r=t.length,l.push(t[0].name),l.push([32*(e-t[0].x),8*t[0].y]),n=1;n<r;n++)"[object Array]"===Object.prototype.toString.call(t[n])?l.push([32*(e-t[n][0].x),8*t[n][0].y]):l.push([32*(e-t[n].x),8*t[n].y]);for(i.push(function(t){var e,n,r,a,o,s,i,l,c,p=["g"],u=[],h=t.length;for(e=2;e<h;e++)u.push(t[e][1]);for(n=Math.min.apply(null,u),r=Math.max.apply(null,u),p.push(["g",{transform:"translate(16,0)"},["path",{d:"M  "+t[2][0]+","+n+" "+t[2][0]+","+r,class:"wire"}]]),e=2;e<h;e++)p.push(["g",["path",{d:"m  "+t[e][0]+","+t[e][1]+" 16,0",class:"wire"}]]);return p.push(["g",{transform:"translate("+t[1][0]+","+t[1][1]+")"},["title",t[0]],(a=t[0],o=n-t[1][1],s=r-t[1][1],c=" M 4,0 C 4,1.1 3.1,2 2,2 0.9,2 0,1.1 0,0 c 0,-1.1 0.9,-2 2,-2 1.1,0 2,0.9 2,2 z",s===o&&(o=-(s=4)),l={BUF:1,INV:1,AND:"&",NAND:"&",OR:"≥1",NOR:"≥1",XOR:"=1",XNOR:"=1",box:""}[a],(i={"~":"M -11,-6 -11,6 0,0 z m -5,6 5,0"+c,"=":"M -11,-6 -11,6 0,0 z m -5,6 5,0","&":"m -16,-10 5,0 c 6,0 11,4 11,10 0,6 -5,10 -11,10 l -5,0 z","~&":"m -16,-10 5,0 c 6,0 11,4 11,10 0,6 -5,10 -11,10 l -5,0 z"+c,"|":"m -18,-10 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 2.5,-5 2.5,-15 0,-20 z","~|":"m -18,-10 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 2.5,-5 2.5,-15 0,-20 z"+c,"^":"m -21,-10 c 1,3 2,6 2,10 m 0,0 c 0,4 -1,7 -2,10 m 3,-20 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 1,-3 2,-6 2,-10 0,-4 -1,-7 -2,-10 z","~^":"m -21,-10 c 1,3 2,6 2,10 m 0,0 c 0,4 -1,7 -2,10 m 3,-20 4,0 c 6,0 12,5 14,10 -2,5 -8,10 -14,10 l -4,0 c 1,-3 2,-6 2,-10 0,-4 -1,-7 -2,-10 z"+c,"+":"m -8,5 0,-10 m -5,5 10,0 m 3,0 c 0,4.418278 -3.581722,8 -8,8 -4.418278,0 -8,-3.581722 -8,-8 0,-4.418278 3.581722,-8 8,-8 4.418278,0 8,3.581722 8,8 z","*":"m -4,4 -8,-8 m 0,8 8,-8 m 4,4 c 0,4.418278 -3.581722,8 -8,8 -4.418278,0 -8,-3.581722 -8,-8 0,-4.418278 3.581722,-8 8,-8 4.418278,0 8,3.581722 8,8 z"}[a])?["path",{class:"gate",d:i}]:l?["g",["path",{class:"gate",d:"m -16,"+(o-3)+" 16,0 0,"+(s-o+6)+" -16,0 z"+({INV:1,NAND:1,NOR:1,XNOR:1}[a]?c:"")}],["text",["tspan",{x:"-14",y:"4",class:"wirename"},l+""]]]:["text",["tspan",{x:"-14",y:"4",class:"wirename"},a+""]])]),p}(l)),n=1;n<r;n++)i.push(m(t[n],e))}else s=t.name,a=32*(e-t.x),o=8*t.y,i.push(["g",{transform:"translate("+a+","+o+")"},["title",s],["path",{d:"M 2,0 a 2,2 0 1 1 -4,0 2,2 0 1 1 4,0 z"}],["text",["tspan",{x:"-4",y:"4",class:"pinname"},s]]]);return i}e.exports=function(t,e){var n,r,a,o,s,i,l,c,p,u,h=["g"],f=["g"];for(c=e.assign.length,r={x:0,y:2,xmax:0},n=e.assign,l=0;l<c;l++)(r=y(n[l],r)).x++;for(a=r.xmax+3,l=0;l<c;l++)h.push(m(n[l],a));for(s=32*(a+1)+1,i=8*(r.y+1)-7,c=4*(a+1),u=r.y+1,l=0;l<=c;l++)for(p=0;p<=u;p++)f.push(["rect",{height:1,width:1,x:8*l-.5,y:8*p-.5,class:"grid"}]);(o=document.getElementById("svgcontent_"+t)).setAttribute("viewBox","0 0 "+s+" "+i),o.setAttribute("width",s),o.setAttribute("height",i),o.insertBefore(d(["g",{transform:"translate(0.5, 0.5)"},f,h]),null)}},{"./create-element":2}],32:[function(t,e,n){"use strict";var f=t("./w3");e.exports=function(t,e,n,r){var a,o,s,i,l,c,p,u,h=[];if(e)for(a in(o=document.createElementNS(f.svg,"g")).id="wavegaps_"+n,t.insertBefore(o,null),p=!1,e)if(r.period=e[a].period?e[a].period:1,r.phase=(e[a].phase?2*e[a].phase:0)+r.xmin_cfg,(s=document.createElementNS(f.svg,"g")).id="wavegap_"+a+"_"+n,s.setAttribute("transform","translate(0,"+(r.y0+a*r.yo)+")"),o.insertBefore(s,null),c=e[a].wave)for(h=c.split(""),l=0;h.length;)"<"===(u=h.shift())&&(p=!0,u=h.shift()),">"===u&&(p=!1,u=h.shift()),l+=p?1:2*r.period,"|"===u&&((i=document.createElementNS(f.svg,"use")).setAttributeNS(f.xlink,"xlink:href","#gap"),i.setAttribute("transform","translate("+r.xs*((l-(p?0:r.period))*r.hscale-r.phase)+")"),s.insertBefore(i,null))}},{"./w3":38}],33:[function(t,e,n){"use strict";var l=t("tspan");e.exports=function(t,n,r){var a,o,s,i=["g"];return t.forEach(function(t,e){i.push(["path",{id:"group_"+e+"_"+n,d:"m "+(t.x+.5)+","+(t.y*r.yo+3.5+r.yh0+r.yh1)+" c -3,0 -5,2 -5,5 l 0,"+(t.height*r.yo-16)+" c 0,3 2,5 5,5",style:"stroke:#0041c4;stroke-width:1;fill:none"}]),void 0!==t.name&&(a=t.x-10,o=r.yo*(t.y+t.height/2)+r.yh0+r.yh1,(s=l.parse(t.name)).unshift("text",{"text-anchor":"middle",class:"info","xml:space":"preserve"}),i.push(["g",{transform:"translate("+a+","+o+")"},["g",{transform:"rotate(270)"},s]]))}),i}},{tspan:49}],34:[function(t,e,n){"use strict";var m=t("tspan"),g=t("./create-element");e.exports=function(t,e,n,r){var d,y,a,o,s,i;function l(t,e,n){var r;t[e]&&t[e].text&&((r=m.parse(t[e].text)).unshift("text",{x:t.xmax*t.xs/2,y:n,"text-anchor":"middle",fill:"#000","xml:space":"preserve"}),r=g(r),y.insertBefore(r,null))}function c(t,e,n,r,a,o,s){var i,l,c,p,u=1,h=0,f=[];if(void 0!==t[e]&&void 0!==t[e][n]){if("string"==typeof(c=t[e][n]))c=c.split(" ");else if("number"==typeof c||"boolean"==typeof c)for(l=Number(c),c=[],d=0;d<s;d+=1)c.push(d+l);if("[object Array]"===Object.prototype.toString.call(c)&&0!==c.length){if(1===c.length)if(l=Number(c[0]),isNaN(l))f=c;else for(d=0;d<s;d+=1)f[d]=d+l;else if(2===c.length)if(l=Number(c[0]),u=Number(c[1]),2===(p=c[1].split(".")).length&&(h=p[1].length),isNaN(l)||isNaN(u))f=c;else for(l*=u,d=0;d<s;d+=1)f[d]=(u*d+l).toFixed(h);else f=c;for(d=0;d<s;d+=1)p=f[d],(i=m.parse(p)).unshift("text",{x:d*a+r,y:o,"text-anchor":"middle",class:"muted","xml:space":"preserve"}),i=g(i),y.insertBefore(i,null)}}}for(s=(o=2*r.hscale)*r.xs,a=r.xmax/o,i=e.length*r.yo,y=g(["g",{id:"gmarks_"+n}]),t.insertBefore(y,t.firstChild),d=0;d<a+1;d+=1)y.insertBefore(g(["path",{id:"gmark_"+d+"_"+n,d:"m "+d*s+",0 0,"+i,style:"stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"}]),null);l(r,"head",r.yh0?-33:-13),l(r,"foot",i+(r.yf0?45:25)),c(r,"head","tick",0,s,-5,a+1),c(r,"head","tock",s/2,s,-5,a),c(r,"foot","tick",0,s,i+15,a+1),c(r,"foot","tock",s/2,s,i+15,a)}},{"./create-element":2,tspan:49}],35:[function(t,e,n){"use strict";var o=t("./create-element"),s=t("bit-field/lib/render");e.exports=function(t,e,n){for(;n.childNodes.length;)n.removeChild(n.childNodes[0]);var r=s(e.reg,e.config),a=o(r);n.insertBefore(a,null)}},{"./create-element":2,"bit-field/lib/render":41}],36:[function(t,e,n){"use strict";var d=t("./rec"),y=t("./lane"),m=t("./create-element"),g=t("./parse-config"),x=t("./parse-wave-lanes"),v=t("./render-marks"),b=t("./render-gaps"),_=t("./render-groups"),w=t("./render-wave-lane"),k=t("./render-assign"),M=t("./render-reg"),A=t("./render-arcs"),N=t("./insert-svg-template"),S=t("./insert-svg-template-assign"),E=t("./fsm-gen-data"),z=t("./fsm-insert-svg-template"),B=t("./fsm-render");e.exports=function(t,e,n){var r,a,o,s,i,l,c,p,u,h,f=0;if(e.signal){for(u in N(t,document.getElementById(n+t),e,y),g(e,y),r=d(e.signal,{x:0,y:0,xmax:0,width:[],lanes:[],groups:[]}),a=document.getElementById("lanes_"+t),o=document.getElementById("groups_"+t),i=x(r.lanes,y),p=w(a,i,t,y))f=Math.max(f,p[u]+r.width[u]);v(a,i,t,y),A(a,r.lanes,t,e,y),b(a,r.lanes,t,y),o.insertBefore(m(_(r.groups,t,y)),null),y.xg=Math.ceil((f-y.tgo)/y.xs)*y.xs,l=y.xg+y.xs*(y.xmax+1),c=i.length*y.yo+y.yh0+y.yh1+y.yf0+y.yf1,(s=document.getElementById("svgcontent_"+t)).setAttribute("viewBox","0 0 "+l+" "+c),s.setAttribute("width",l),s.setAttribute("height",c),s.setAttribute("overflow","hidden"),a.setAttribute("transform","translate("+(y.xg+.5)+", "+(y.yh0+y.yh1+.5)+")")}else e.assign?(S(t,document.getElementById(n+t),e),k(t,e)):e.reg?M(t,e,document.getElementById(n+t)):e.fsm&&(h=E(e),z(t,document.getElementById(n+t),h),B(t,document.getElementById(n+t),h))}},{"./create-element":2,"./fsm-gen-data":6,"./fsm-insert-svg-template":8,"./fsm-render":11,"./insert-svg-template":18,"./insert-svg-template-assign":17,"./lane":24,"./parse-config":25,"./parse-wave-lanes":27,"./rec":29,"./render-arcs":30,"./render-assign":31,"./render-gaps":32,"./render-groups":33,"./render-marks":34,"./render-reg":35,"./render-wave-lane":37}],37:[function(t,e,n){"use strict";var m=t("tspan"),g=t("./create-element"),x=t("./w3"),v=t("./find-lane-markers");e.exports=function(t,e,n,r){var a,o,s,i,l,c,p,u,h,f=[1],d=0,y=[];for(o=0;o<e.length;o+=1)if((u=e[o][0][0])&&(i=g(["g",{id:"wavelane_"+o+"_"+n,transform:"translate(0,"+(r.y0+o*r.yo)+")"}]),t.insertBefore(i,null),(c=m.parse(u)).unshift("text",{x:r.tgo,y:r.ym,class:"info","text-anchor":"end","xml:space":"preserve"}),c=g(c),i.insertBefore(c,null),y.push(c.getBBox().width),h=0<(h=e[o][0][1])?Math.ceil(2*h)-2*h:-2*h,l=g(["g",{id:"wavelane_draw_"+o+"_"+n,transform:"translate("+h*r.xs+", 0)"}]),i.insertBefore(l,null),e[o][1])){for(a=0;a<e[o][1].length;a+=1)(p=document.createElementNS(x.svg,"use")).setAttributeNS(x.xlink,"xlink:href","#"+e[o][1][a]),p.setAttribute("transform","translate("+a*r.xs+")"),l.insertBefore(p,null);if(e[o][2]&&e[o][2].length&&0!==(f=v(e[o][1])).length)for(s in f)e[o][2]&&void 0!==e[o][2][s]&&((c=m.parse(e[o][2][s])).unshift("text",{x:f[s]*r.xs+r.xlabel,y:r.ym,"text-anchor":"middle","xml:space":"preserve"}),c=g(c),l.insertBefore(c,null));e[o][1].length>d&&(d=e[o][1].length)}return r.xmax=Math.min(d,r.xmax_cfg-r.xmin_cfg),r.xg=20,y}},{"./create-element":2,"./find-lane-markers":5,"./w3":38,tspan:49}],38:[function(t,e,n){"use strict";e.exports={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/XML/1998/namespace"}},{}],39:[function(t,e,n){"use strict";window.WaveDrom=window.WaveDrom||{};var r=t("./");window.WaveDrom.ProcessAll=r.processAll,window.WaveDrom.RenderWaveForm=r.renderWaveForm,window.WaveDrom.EditorRefresh=r.editorRefresh,window.WaveDrom.eva=r.eva},{"./":16}],40:[function(t,e,n){"use strict";e.exports=window.WaveSkin},{}],41:[function(t,e,n){"use strict";var m=t("tspan");function g(t,e){return"translate("+t+","+e+")"}function l(t,e,n){var r=["line"],a={};return e?(a.x1=e,a.x2=e+t):a.x2=t,n&&(a.y1=n,a.y2=n),r.push(a),r}function c(t,e,n){var r=["line"],a={};return e&&(a.x1=e,a.x2=e),n?(a.y1=n,a.y2=n+t):a.y2=t,r.push(a),r}function r(t,e){return["g",{"text-anchor":"middle"},(n=t,i=e,l=i.hspace/i.mod,c=["g",{transform:g(l/2,i.vspace/5)}],p=["g",{transform:g(l/2,i.vspace/2+4)}],u=["g",{transform:g(l/2,i.vspace)}],h=["g",{transform:g(0,i.vspace/4)}],f=i.fontsize,d=i.fontfamily,y=i.fontweight,n.forEach(function(t){var e,n,r,a,o,s;if(r=0,a=i.mod-1,o=i.index*i.mod,s=(i.index+1)*i.mod-1,t.lsb/i.mod>>0===i.index)r=t.lsbm,o=t.lsb,t.msb/i.mod>>0===i.index&&(s=t.msb,a=t.msbm);else{if(t.msb/i.mod>>0!==i.index)return;s=t.msb,a=t.msbm}c.push(["text",{x:l*(i.mod-r-1),"font-size":f,"font-family":d,"font-weight":y},o.toString()]),r!==a&&c.push(["text",{x:l*(i.mod-a-1),"font-size":f,"font-family":d,"font-weight":y},s.toString()]),t.name?((e=m.parse(t.name)).unshift({x:l*(i.mod-(a+r)/2-1),"font-size":f,"font-family":d,"font-weight":y}),e.unshift("text"),p.push(e)):h.push(["rect",{style:"fill-opacity:0.1",x:l*(i.mod-a-1),y:0,width:l*(a-r+1),height:i.vspace/2}]),t.attr&&((n=m.parse(t.attr)).unshift({x:l*(i.mod-(a+r)/2-1),"font-size":f,"font-family":d,"font-weight":y}),n.unshift("text"),u.push(n))}),["g",h,c,p,u])];var n,i,l,c,p,u,h,f,d,y}function s(t,e){var n=["g",{transform:g(4.5,(e.lanes-e.index-1)*e.vspace+.5)}];return n.push(function(t,e){var n=e.hspace,r=e.vspace,a=e.mod,o=["g",{stroke:"black","stroke-width":1,"stroke-linecap":"round",transform:g(0,r/4)}];o.push(l(n)),o.push(c(r/2)),o.push(l(n,0,r/2));for(var s=e.index*e.mod,i=e.mod;i===e.mod||t.some(function(t){return t.lsb===s})?o.push(c(r/2,i*(n/a))):(o.push(c(r/16,i*(n/a))),o.push(c(r/16,i*(n/a),7*r/16))),s++,--i;);return o}(t,e)),n.push(r(t,e)),n}function i(t,e,n){return"number"==typeof t&&e<t?0|t:n}e.exports=function(t,e){(e="object"==typeof e?e:{}).vspace=i(e.vspace,19,80),e.hspace=i(e.hspace,39,640),e.lanes=i(e.lanes,0,2),e.bits=i(e.bits,4,32),e.fontsize=i(e.fontsize,5,14),e.bigendian=e.bigendian||!1,e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal";var n,r=["svg",{xmlns:"http://www.w3.org/2000/svg",width:e.hspace+9,height:e.vspace*e.lanes+5,viewBox:[0,0,e.hspace+9,e.vspace*e.lanes+5].join(" ")}],a=0,o=e.bits/e.lanes;for(e.mod=0|o,t.forEach(function(t){t.lsb=a,t.lsbm=a%o,a+=t.bits,t.msb=a-1,t.msbm=t.msb%o}),n=0;n<e.lanes;n++)e.index=n,r.push(s(t,e));return r}},{tspan:42}],42:[function(t,e,n){"use strict";var r=t("./parse"),a=t("./reparse");e.exports={parse:r,reparse:a}},{"./parse":43,"./reparse":44}],43:[function(t,e,n){"use strict";var s=/<o>|<ins>|<s>|<sub>|<sup>|<b>|<i>|<tt>|<\/o>|<\/ins>|<\/s>|<\/sub>|<\/sup>|<\/b>|<\/i>|<\/tt>/;function i(n,t){t.add&&t.add.split(";").forEach(function(t){var e=t.split(" ");n[e[0]][e[1]]=!0}),t.del&&t.del.split(";").forEach(function(t){var e=t.split(" ");delete n[e[0]][e[1]]})}var l={"<o>":{add:"text-decoration overline"},"</o>":{del:"text-decoration overline"},"<ins>":{add:"text-decoration underline"},"</ins>":{del:"text-decoration underline"},"<s>":{add:"text-decoration line-through"},"</s>":{del:"text-decoration line-through"},"<b>":{add:"font-weight bold"},"</b>":{del:"font-weight bold"},"<i>":{add:"font-style italic"},"</i>":{del:"font-style italic"},"<sub>":{add:"baseline-shift sub;font-size .7em"},"</sub>":{del:"baseline-shift sub;font-size .7em"},"<sup>":{add:"baseline-shift super;font-size .7em"},"</sup>":{del:"baseline-shift super;font-size .7em"},"<tt>":{add:"font-family monospace"},"</tt>":{del:"font-family monospace"}};function c(r){return Object.keys(r).reduce(function(t,e){var n=Object.keys(r[e]);return 0<n.length&&(t[e]=n.join(" ")),t},{})}e.exports=function(t){var e,n,r,a,o;if(void 0===t)return[];if("number"==typeof t)return[t+""];if("string"!=typeof t)return[t];for(n=[],e={"text-decoration":{},"font-weight":{},"font-style":{},"baseline-shift":{},"font-size":{},"font-family":{}};;){if(-1===(r=t.search(s)))return n.push(["tspan",c(e),t]),n;if(0<r&&(o=t.slice(0,r),n.push(["tspan",c(e),o])),a=t.match(s)[0],i(e,l[a]),0===(t=t.slice(r+a.length)).length)return n}}},{}],44:[function(t,e,n){"use strict";var r=t("./parse");e.exports=function(t){var s=t.createElement;function e(t,e){var n=t[0],a=t[1],r=Object.keys(a).reduce(function(t,e){var n,r;return t[null===(r=(n=e).match(/(\w+)-(\w)(\w+)/))?n:r[1]+r[2].toUpperCase()+r[3]]=a[e],t},{}),o=t[2];return a.key=e,s(n,r,o)}return function(t){return r(t).map(e)}}},{"./parse":43}],45:[function(t,e,n){var r,a;r=this,a=function(t){"use strict";var i=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},e=function(o){var n;return 1===o.length&&(n=o,o=function(t,e){return i(n(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var a=n+r>>>1;o(t[a],e)<0?n=a+1:r=a}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var a=n+r>>>1;0<o(t[a],e)?r=a:n=a+1}return n}}};var n=e(i),y=n.right,r=n.left;function p(t,e){return[t,e]}var c=function(t){return null===t?NaN:+t},a=function(t,e){var n,r,a=t.length,o=0,s=-1,i=0,l=0;if(null==e)for(;++s<a;)isNaN(n=c(t[s]))||(l+=(r=n-i)*(n-(i+=r/++o)));else for(;++s<a;)isNaN(n=c(e(t[s],s,t)))||(l+=(r=n-i)*(n-(i+=r/++o)));if(1<o)return l/(o-1)},o=function(t,e){var n=a(t,e);return n?Math.sqrt(n):n},s=function(t,e){var n,r,a,o=t.length,s=-1;if(null==e){for(;++s<o;)if(null!=(n=t[s])&&n<=n)for(r=a=n;++s<o;)null!=(n=t[s])&&(n<r&&(r=n),a<n&&(a=n))}else for(;++s<o;)if(null!=(n=e(t[s],s,t))&&n<=n)for(r=a=n;++s<o;)null!=(n=e(t[s],s,t))&&(n<r&&(r=n),a<n&&(a=n));return[r,a]},l=Array.prototype,u=l.slice,h=l.map,m=function(t){return function(){return t}},g=function(t){return t},x=function(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(a);++r<a;)o[r]=t+r*n;return o},f=Math.sqrt(50),d=Math.sqrt(10),v=Math.sqrt(2);function b(t,e,n){var r=(e-t)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return 0<=a?(f<=o?10:d<=o?5:v<=o?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(f<=o?10:d<=o?5:v<=o?2:1)}function _(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return f<=o?a*=10:d<=o?a*=5:v<=o&&(a*=2),e<t?-a:a}var w=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},k=function(t,e,n){if(null==n&&(n=c),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var r,a=(r-1)*e,o=Math.floor(a),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(a-o)}},M=function(t,e){var n,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n<=n)for(r=n;++o<a;)null!=(n=t[o])&&n<r&&(r=n)}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n<=n)for(r=n;++o<a;)null!=(n=e(t[o],o,t))&&n<r&&(r=n);return r},A=function(t){if(!(a=t.length))return[];for(var e=-1,n=M(t,N),r=new Array(n);++e<n;)for(var a,o=-1,s=r[e]=new Array(a);++o<a;)s[o]=t[o][e];return r};function N(t){return t.length}t.bisect=y,t.bisectRight=y,t.bisectLeft=r,t.ascending=i,t.bisector=e,t.cross=function(t,e,n){var r,a,o,s,i=t.length,l=e.length,c=new Array(i*l);for(null==n&&(n=p),r=o=0;r<i;++r)for(s=t[r],a=0;a<l;++a,++o)c[o]=n(s,e[a]);return c},t.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},t.deviation=o,t.extent=s,t.histogram=function(){var h=g,f=s,d=w;function e(t){var e,n,r=t.length,a=new Array(r);for(e=0;e<r;++e)a[e]=h(t[e],e,t);var o=f(a),s=o[0],i=o[1],l=d(a,s,i);Array.isArray(l)||(l=_(s,i,l),l=x(Math.ceil(s/l)*l,Math.floor(i/l)*l,l));for(var c=l.length;l[0]<=s;)l.shift(),--c;for(;l[c-1]>i;)l.pop(),--c;var p,u=new Array(c+1);for(e=0;e<=c;++e)(p=u[e]=[]).x0=0<e?l[e-1]:s,p.x1=e<c?l[e]:i;for(e=0;e<r;++e)s<=(n=a[e])&&n<=i&&u[y(l,n,0,c)].push(t[e]);return u}return e.value=function(t){return arguments.length?(h="function"==typeof t?t:m(t),e):h},e.domain=function(t){return arguments.length?(f="function"==typeof t?t:m([t[0],t[1]]),e):f},e.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?m(u.call(t)):m(t),e):d},e},t.thresholdFreedmanDiaconis=function(t,e,n){return t=h.call(t,c).sort(i),Math.ceil((n-e)/(2*(k(t,.75)-k(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*o(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=w,t.max=function(t,e){var n,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n<=n)for(r=n;++o<a;)null!=(n=t[o])&&r<n&&(r=n)}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n<=n)for(r=n;++o<a;)null!=(n=e(t[o],o,t))&&r<n&&(r=n);return r},t.mean=function(t,e){var n,r=t.length,a=r,o=-1,s=0;if(null==e)for(;++o<r;)isNaN(n=c(t[o]))?--a:s+=n;else for(;++o<r;)isNaN(n=c(e(t[o],o,t)))?--a:s+=n;if(a)return s/a},t.median=function(t,e){var n,r=t.length,a=-1,o=[];if(null==e)for(;++a<r;)isNaN(n=c(t[a]))||o.push(n);else for(;++a<r;)isNaN(n=c(e(t[a],a,t)))||o.push(n);return k(o.sort(i),.5)},t.merge=function(t){for(var e,n,r,a=t.length,o=-1,s=0;++o<a;)s+=t[o].length;for(n=new Array(s);0<=--a;)for(e=(r=t[a]).length;0<=--e;)n[--s]=r[e];return n},t.min=M,t.pairs=function(t,e){null==e&&(e=p);for(var n=0,r=t.length-1,a=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(a,a=t[++n]);return o},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.quantile=k,t.range=x,t.scan=function(t,e){if(n=t.length){var n,r,a=0,o=0,s=t[o];for(null==e&&(e=i);++a<n;)(e(r=t[a],s)<0||0!==e(s,s))&&(s=r,o=a);return 0===e(s,s)?o:void 0}},t.shuffle=function(t,e,n){for(var r,a,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)a=Math.random()*o--|0,r=t[o+e],t[o+e]=t[a+e],t[a+e]=r;return t},t.sum=function(t,e){var n,r=t.length,a=-1,o=0;if(null==e)for(;++a<r;)(n=+t[a])&&(o+=n);else for(;++a<r;)(n=+e(t[a],a,t))&&(o+=n);return o},t.ticks=function(t,e,n){var r,a,o,s,i=-1;if(n=+n,(t=+t)==(e=+e)&&0<n)return[t];if((r=e<t)&&(a=t,t=e,e=a),0===(s=b(t,e,n))||!isFinite(s))return[];if(0<s)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(t+i)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(t-i)/s;return r&&o.reverse(),o},t.tickIncrement=b,t.tickStep=_,t.transpose=A,t.variance=a,t.zip=function(){return A(arguments)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?a(n):"function"==typeof define&&define.amd?define(["exports"],a):a(r.d3=r.d3||{})},{}],46:[function(t,e,n){var r,a;r=this,a=function(t){"use strict";var o={value:function(){}};function e(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new a(r)}function a(t){this._=t}function l(t,e){for(var n,r=0,a=t.length;r<a;++r)if((n=t[r]).name===e)return n.value}function c(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=o,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}a.prototype=e.prototype={constructor:a,on:function(t,e){var n,r,a=this._,o=(r=a,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),s=-1,i=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<i;)if(n=(t=o[s]).type)a[n]=c(a[n],t.name,e);else if(null==e)for(n in a)a[n]=c(a[n],t.name,null);return this}for(;++s<i;)if((n=(t=o[s]).type)&&(n=l(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new a(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,a=new Array(n),o=0;o<n;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,o=r.length;a<o;++a)r[a].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?a(n):"function"==typeof define&&define.amd?define(["exports"],a):a(r.d3=r.d3||{})},{}],47:[function(t,e,n){var r,a;r=this,a=function(t,_,w){"use strict";function k(){w.event.stopImmediatePropagation()}var M=function(){w.event.preventDefault(),w.event.stopImmediatePropagation()},A=function(t){var e=t.document.documentElement,n=w.select(t).on("dragstart.drag",M,!0);"onselectstart"in e?n.on("selectstart.drag",M,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function N(t,e){var n=t.document.documentElement,r=w.select(t).on("dragstart.drag",null);e&&(r.on("click.drag",M,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var S=function(t){return function(){return t}};function E(t,e,n,r,a,o,s,i,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=a,this.x=o,this.y=s,this.dx=i,this.dy=l,this._=c}function z(){return!w.event.button}function B(){return this.parentNode}function O(t){return null==t?{x:w.event.x,y:w.event.y}:t}function j(){return"ontouchstart"in this}E.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};t.drag=function(){var n,r,a,o,s=z,i=B,e=O,l=j,d={},y=_.dispatch("start","drag","end"),m=0,c=0;function g(t){t.on("mousedown.drag",p).filter(l).on("touchstart.drag",f).on("touchmove.drag",x).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!o&&s.apply(this,arguments)){var t=b("mouse",i.apply(this,arguments),w.mouse,this,arguments);t&&(w.select(w.event.view).on("mousemove.drag",u,!0).on("mouseup.drag",h,!0),A(w.event.view),k(),a=!1,n=w.event.clientX,r=w.event.clientY,t("start"))}}function u(){if(M(),!a){var t=w.event.clientX-n,e=w.event.clientY-r;a=c<t*t+e*e}d.mouse("drag")}function h(){w.select(w.event.view).on("mousemove.drag mouseup.drag",null),N(w.event.view,a),M(),d.mouse("end")}function f(){if(s.apply(this,arguments)){var t,e,n=w.event.changedTouches,r=i.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=b(n[t].identifier,r,w.touch,this,arguments))&&(k(),e("start"))}}function x(){var t,e,n=w.event.changedTouches,r=n.length;for(t=0;t<r;++t)(e=d[n[t].identifier])&&(M(),e("drag"))}function v(){var t,e,n=w.event.changedTouches,r=n.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<r;++t)(e=d[n[t].identifier])&&(k(),e("end"))}function b(a,o,s,i,l){var c,p,u,h=s(o,a),f=y.copy();if(w.customEvent(new E(g,"beforestart",c,a,m,h[0],h[1],0,0,f),function(){return null!=(w.event.subject=c=e.apply(i,l))&&(p=c.x-h[0]||0,u=c.y-h[1]||0,!0)}))return function t(e){var n,r=h;switch(e){case"start":d[a]=t,n=m++;break;case"end":delete d[a],--m;case"drag":h=s(o,a),n=m}w.customEvent(new E(g,e,c,a,n,h[0]+p,h[1]+u,h[0]-r[0],h[1]-r[1],f),f.apply,f,[e,i,l])}}return g.filter=function(t){return arguments.length?(s="function"==typeof t?t:S(!!t),g):s},g.container=function(t){return arguments.length?(i="function"==typeof t?t:S(t),g):i},g.subject=function(t){return arguments.length?(e="function"==typeof t?t:S(t),g):e},g.touchable=function(t){return arguments.length?(l="function"==typeof t?t:S(!!t),g):l},g.on=function(){var t=y.on.apply(y,arguments);return t===y?g:t},g.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,g):Math.sqrt(c)},g},t.dragDisable=A,t.dragEnable=N,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?a(n,t("d3-dispatch"),t("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],a):a(r.d3=r.d3||{},r.d3,r.d3)},{"d3-dispatch":46,"d3-selection":48}],48:[function(t,e,n){var r,a;r=this,a=function(o){"use strict";var r="http://www.w3.org/1999/xhtml",a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function s(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),a.hasOwnProperty(e)?{space:a[e],local:t}:t}function i(t){var e=s(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===r&&t.documentElement.namespaceURI===r?t.createElement(n):t.createElementNS(e,n)}})(e)}function e(){}function u(t){return null==t?e:function(){return this.querySelector(t)}}function n(){return[]}function p(t){return null==t?n:function(){return this.querySelectorAll(t)}}var t=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var l=document.documentElement;if(!l.matches){var c=l.webkitMatchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector;t=function(t){return function(){return c.call(this,t)}}}}var h=t;function f(t){return new Array(t.length)}function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var y="$";function w(t,e,n,r,a,o){for(var s,i=0,l=e.length,c=o.length;i<c;++i)(s=e[i])?(s.__data__=o[i],r[i]=s):n[i]=new d(t,o[i]);for(;i<l;++i)(s=e[i])&&(a[i]=s)}function k(t,e,n,r,a,o,s){var i,l,c,p={},u=e.length,h=o.length,f=new Array(u);for(i=0;i<u;++i)(l=e[i])&&(f[i]=c=y+s.call(l,l.__data__,i,e),c in p?a[i]=l:p[c]=l);for(i=0;i<h;++i)(l=p[c=y+s.call(t,o[i],i,o)])?((r[i]=l).__data__=o[i],p[c]=null):n[i]=new d(t,o[i]);for(i=0;i<u;++i)(l=e[i])&&p[f[i]]===l&&(a[i]=l)}function m(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function g(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function x(t,e){return t.style.getPropertyValue(e)||g(t).getComputedStyle(t,null).getPropertyValue(e)}function v(t){return t.trim().split(/^|\s+/)}function b(t){return t.classList||new _(t)}function _(t){this._node=t,this._names=v(t.getAttribute("class")||"")}function M(t,e){for(var n=b(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function A(t,e){for(var n=b(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function N(){this.textContent=""}function S(){this.innerHTML=""}function E(){this.nextSibling&&this.parentNode.appendChild(this)}function z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B(){return null}function O(){var t=this.parentNode;t&&t.removeChild(this)}function j(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function C(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}_.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var P={};(o.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));function I(n,t,e){return n=L(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function L(n,r,a){return function(t){var e=o.event;o.event=t;try{n.call(this,this.__data__,r,a)}finally{o.event=e}}}function T(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,a=t.length;n<a;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function D(l,c,p){var u=P.hasOwnProperty(l.type)?I:L;return function(t,e,n){var r,a=this.__on,o=u(c,e,n);if(a)for(var s=0,i=a.length;s<i;++s)if((r=a[s]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=p),void(r.value=c);this.addEventListener(l.type,o,p),r={type:l.type,name:l.name,value:c,listener:o,capture:p},a?a.push(r):this.__on=[r]}}function F(t,e,n){var r=g(t),a=r.CustomEvent;"function"==typeof a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}var H=[null];function q(t,e){this._groups=t,this._parents=e}function W(){return new q([[document.documentElement]],H)}function J(t){return"string"==typeof t?new q([[document.querySelector(t)]],[document.documentElement]):new q([[t]],H)}q.prototype=W.prototype={constructor:q,select:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var o,s,i=e[a],l=i.length,c=r[a]=new Array(l),p=0;p<l;++p)(o=i[p])&&(s=t.call(o,o.__data__,p,i))&&("__data__"in o&&(s.__data__=o.__data__),c[p]=s);return new q(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=p(t));for(var e=this._groups,n=e.length,r=[],a=[],o=0;o<n;++o)for(var s,i=e[o],l=i.length,c=0;c<l;++c)(s=i[c])&&(r.push(t.call(s,s.__data__,c,i)),a.push(s));return new q(r,a)},filter:function(t){"function"!=typeof t&&(t=h(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var o,s=e[a],i=s.length,l=r[a]=[],c=0;c<i;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new q(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),p=-1,this.each(function(t){d[++p]=t}),d;var n,r=e?k:w,a=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,i=new Array(s),l=new Array(s),c=new Array(s),p=0;p<s;++p){var u=a[p],h=o[p],f=h.length,d=t.call(u,u&&u.__data__,p,a),y=d.length,m=l[p]=new Array(y),g=i[p]=new Array(y);r(u,h,m,g,c[p]=new Array(f),d,e);for(var x,v,b=0,_=0;b<y;++b)if(x=m[b]){for(_<=b&&(_=b+1);!(v=g[_])&&++_<y;);x._next=v||null}}return(i=new q(i,a))._enter=l,i._exit=c,i},enter:function(){return new q(this._enter||this._groups.map(f),this._parents)},exit:function(){return new q(this._exit||this._groups.map(f),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,a=n.length,o=Math.min(r,a),s=new Array(r),i=0;i<o;++i)for(var l,c=e[i],p=n[i],u=c.length,h=s[i]=new Array(u),f=0;f<u;++f)(l=c[f]||p[f])&&(h[f]=l);for(;i<r;++i)s[i]=e[i];return new q(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,a=t[e],o=a.length-1,s=a[o];0<=--o;)(r=a[o])&&(s&&s!==r.nextSibling&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=m);for(var e=this._groups,r=e.length,a=new Array(r),o=0;o<r;++o){for(var s,i=e[o],l=i.length,c=a[o]=new Array(l),p=0;p<l;++p)(s=i[p])&&(c[p]=s);c.sort(t)}return new q(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,o=r.length;a<o;++a){var s=r[a];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,o=e[n],s=0,i=o.length;s<i;++s)(a=o[s])&&t.call(a,a.__data__,s,o);return this},attr:function(t,e){var n=s(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):x(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=v(t+"");if(arguments.length<2){for(var r=b(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?M:A)(this,t)}}:e?function(t){return function(){M(this,t)}}:function(t){return function(){A(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?N:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?S:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(E)},lower:function(){return this.each(z)},append:function(t){var e="function"==typeof t?t:i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:i(t),r=null==e?B:"function"==typeof e?e:u(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(O)},clone:function(t){return this.select(t?C:j)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,a,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),s=o.length;if(!(arguments.length<2)){for(i=e?D:T,null==n&&(n=!1),r=0;r<s;++r)this.each(i(o[r],e,n));return this}var i=this.node().__on;if(i)for(var l,c=0,p=i.length;c<p;++c)for(r=0,l=i[c];r<s;++r)if((a=o[r]).type===l.type&&a.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return F(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return F(this,t,e)}})(t,e))}};var R=0;function V(){return new U}function U(){this._="@"+(++R).toString(36)}function G(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function X(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}U.prototype=V.prototype={constructor:U,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},o.create=function(t){return J(i(t).call(document.documentElement))},o.creator=i,o.local=V,o.matcher=h,o.mouse=function(t){var e=G();return e.changedTouches&&(e=e.changedTouches[0]),X(t,e)},o.namespace=s,o.namespaces=a,o.clientPoint=X,o.select=J,o.selectAll=function(t){return"string"==typeof t?new q([document.querySelectorAll(t)],[document.documentElement]):new q([null==t?[]:t],H)},o.selection=W,o.selector=u,o.selectorAll=p,o.style=x,o.touch=function(t,e,n){arguments.length<3&&(n=e,e=G().changedTouches);for(var r,a=0,o=e?e.length:0;a<o;++a)if((r=e[a]).identifier===n)return X(t,r);return null},o.touches=function(t,e){null==e&&(e=G().touches);for(var n=0,r=e?e.length:0,a=new Array(r);n<r;++n)a[n]=X(t,e[n]);return a},o.window=g,o.customEvent=function(t,e,n,r){var a=o.event;t.sourceEvent=o.event,o.event=t;try{return e.apply(n,r)}finally{o.event=a}},Object.defineProperty(o,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?a(n):"function"==typeof define&&define.amd?define(["exports"],a):a(r.d3=r.d3||{})},{}],49:[function(t,e,n){"use strict";var r=t("./parse"),a=t("./reparse");n.parse=r,n.reparse=a},{"./parse":50,"./reparse":51}],50:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{dup:43}],51:[function(t,e,n){"use strict";var r=t("./parse");e.exports=function(t){var s=t.createElement;function e(t,e){var n=t[0],a=t[1],r=Object.keys(a).reduce(function(t,e){var n,r;return t[null===(r=(n=e).match(/(\w+)-(\w)(\w+)/))?n:r[1]+r[2].toUpperCase()+r[3]]=a[e],t},{}),o=t[2];return r.key=e,s(n,r,o)}return function(t){return r(t).map(e)}}},{"./parse":50}]},{},[39]);